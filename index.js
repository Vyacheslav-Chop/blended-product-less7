import{u as _,c as w,b as h,d as L,a as g,e as m,s as c,g as P,h as b,i as x,j as B,k as M,r as p,l as S,S as k,m as v}from"./assets/helpers-CV-kvwc5.js";import{g as I,u}from"./assets/storage-B5G7F7KK.js";import"./assets/vendor-CG2pNq4b.js";const{homeCategories:T,homeProducts:l,notFoundDiv:O,form:y}=p;let i="",r=1,a="";async function W(o){if(o.target.classList.contains("categories__btn")){a=o.target.textContent.trim(),_(T,o.target),r=1,w(l);try{let e;a==="All"?e=await h(r):e=await L(a,r);const{products:t,total:s}=e;t.length===0?O.classList.add("not-found--visible"):(g(l,t),m(s,r))}catch(e){console.error("Oops! Couldn't fetch products:",e),c("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function N(o){if(o.preventDefault(),r=1,w(l),i=y.elements.searchValue.value.trim(),!i){c("Please fill in the search field!");return}try{const{products:e,total:t}=await P(i,r);if(e.length===0){b(),c("Unfortunately, no results were found for this query.");return}g(l,e),m(t,r)}catch(e){console.error("An error occurred while searching for products:",e),c("An error occurred while searching for products. Please try again later.")}finally{y.reset()}}function A(o){const e=o.target.closest(".modal__close-btn"),t=o.target.closest(".modal-product__btn--cart"),s=o.target.closest(".modal-product__btn--wishlist");if(e){D();return}else if(t){j();return}else if(s){if(s.textContent==="Add to Wishlist"){G(o);return}else if(s.textContent==="Remove from Wishlist")return;return}}async function q(o){const e=o.currentTarget;if(e){r++,e.disabled=!0,x();try{let t;i?t=await P(i,r):a?a==="All"?t=await h(r):t=await L(a,r):t=await h(r);const{products:s,total:n}=t;s.length===0?B("No products found matching your search criteria."):(g(l,s),setTimeout(()=>M()),m(n,r),e.disabled=!1)}catch{c("Oops! Something went wrong. Please try again later.")}}}const{modal:f,addToCartBtn:R}=p,{cart:C,wishlist:d}=k;function $(){f.classList.add("modal--is-open"),f.addEventListener("click",A)}function D(){f.classList.remove("modal--is-open"),f.removeEventListener("click",A)}function F(o){const e=o.target.closest(".products__item");if(!e)return;const t=Number(e.dataset.id);t&&(S(t),$())}function j(o){const e=Number(R.dataset.id);console.log(e);const t=I(C);console.log(t);const s=t.findIndex(({id:n})=>n===e);s===-1?(t.push({id:e,qty:1}),console.log(t)):t[s].qty++,u(C,t)}function G(o){const e=Number(o.target.dataset.id);console.log(e);const t=JSON.parse(localStorage.getItem(d))??[];if(console.log(t),t.findIndex(n=>n===e)===-1)t.push({id:e}),console.log(t),o.targettBtn.textContent="Remove from Wishlist",console.log(t),u(d,t);else{const n=t.filter(E=>E!==e);u(d,n),o.target.textContent="Add to Wishlist";return}u(d,t)}const{homeCategories:J,form:K,homeProducts:U,loadMoreBtn:V}=p;b();v();J.addEventListener("click",W);K.addEventListener("submit",N);U.addEventListener("click",F);V.addEventListener("click",q);
//# sourceMappingURL=index.js.map
