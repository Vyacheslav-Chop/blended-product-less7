import"./assets/styles-CIcvoXZ8.js";import{u as E,c as w,b as h,d as L,a as g,e as m,s as c,g as P,h as S,i as I,j as _,k as x,r as p,l as B,S as M,m as k}from"./assets/helpers-BxnrvCMH.js";import"./assets/vendor-CG2pNq4b.js";const{homeCategories:v,homeProducts:l,notFoundDiv:O,form:y}=p;let i="",r=1,a="";async function T(o){if(o.target.classList.contains("categories__btn")){a=o.target.textContent.trim(),E(v,o.target),r=1,w(l);try{let e;a==="All"?e=await h(r):e=await L(a,r);const{products:t,total:s}=e;t.length===0?O.classList.add("not-found--visible"):(g(l,t),m(s,r))}catch(e){console.error("Oops! Couldn't fetch products:",e),c("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function N(o){if(o.preventDefault(),r=1,w(l),i=y.elements.searchValue.value.trim(),!i){c("Please fill in the search field!");return}try{const{products:e,total:t}=await P(i,r);if(e.length===0){S(),c("Unfortunately, no results were found for this query.");return}g(l,e),m(t,r)}catch(e){console.error("An error occurred while searching for products:",e),c("An error occurred while searching for products. Please try again later.")}finally{y.reset()}}function b(o){const e=o.target.closest(".modal__close-btn"),t=o.target.closest(".modal-product__btn--cart"),s=o.target.closest(".modal-product__btn--wishlist");if(e){$();return}else if(t){F();return}else if(s){if(s.textContent==="Add to Wishlist"){j(o);return}else if(s.textContent==="Remove from Wishlist")return;return}}async function W(o){const e=o.currentTarget;if(e){r++,e.disabled=!0,I();try{let t;i?t=await P(i,r):a?a==="All"?t=await h(r):t=await L(a,r):t=await h(r);const{products:s,total:n}=t;s.length===0?_("No products found matching your search criteria."):(g(l,s),setTimeout(()=>x()),m(n,r),e.disabled=!1)}catch{c("Oops! Something went wrong. Please try again later.")}}}function u(o,e){localStorage.setItem(o,JSON.stringify(e))}function q(o){return JSON.parse(localStorage.getItem(o))??[]}const{modal:f,addToCartBtn:R}=p,{cart:C,wishlist:d}=M;function J(){f.classList.add("modal--is-open"),f.addEventListener("click",b)}function $(){f.classList.remove("modal--is-open"),f.removeEventListener("click",b)}function D(o){const e=o.target.closest(".products__item");if(!e)return;const t=Number(e.dataset.id);t&&(B(t),J())}function F(o){const e=Number(R.dataset.id);console.log(e);const t=q(C);console.log(t);const s=t.findIndex(({id:n})=>n===e);s===-1?(t.push({id:e,qty:1}),console.log(t)):t[s].qty++,u(C,t)}function j(o){const e=Number(o.target.dataset.id);console.log(e);const t=JSON.parse(localStorage.getItem(d))??[];if(console.log(t),t.findIndex(n=>n===e)===-1)t.push({id:e}),console.log(t),o.targettBtn.textContent="Remove from Wishlist",console.log(t),u(d,t);else{const n=t.filter(A=>A!==e);u(d,n),o.target.textContent="Add to Wishlist";return}u(d,t)}const{homeCategories:G,form:K,homeProducts:U,loadMoreBtn:V}=p;S();k();G.addEventListener("click",T);K.addEventListener("submit",N);U.addEventListener("click",D);V.addEventListener("click",W);
//# sourceMappingURL=index.js.map
