import{i as Y,a as dt}from"./vendor-CG2pNq4b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const v={body:document.body,homeProducts:document.querySelector('.products[data-page="home"]'),wishlistProducts:document.querySelector('.products[data-page="wishlist"]'),homeCategories:document.querySelector(".categories"),notFoundDiv:document.querySelector(".not-found"),form:document.querySelector(".search-form"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),loadMoreBtn:document.querySelector(".load-more-btn"),cartBtnModal:document.querySelector(".modal-product__btn--cart"),wishlistBtnModal:document.querySelector(".modal-product__btn--wishlist"),cartProducts:document.querySelector('.products[data-page="cart"]'),cartSpan:document.querySelector("[data-cart-count]"),cartItems:document.querySelector("[data-count]"),cartTotal:document.querySelector("[data-price]"),wishlistSpan:document.querySelector("[data-wishlist-count]"),changeThemeBtn:document.querySelector("#themeToggle"),goTopBtn:document.querySelector(".go-top"),loader:document.querySelector(".loader")},M={cart:"cart-products",wishlist:"wishlist-products",theme:"theme"},P=12;let W=1;async function q(t=1){const e=(t-1)*P,o=`https://dummyjson.com/products?limit=${P}&skip=${e}`;return C(o)}async function lt(){return C("https://dummyjson.com/products/category-list")}async function J(t,e=1){const o="https://dummyjson.com/products/category/",n=(e-1)*P,r=`${o}${t}?limit=${P}&skip=${n}`;return C(r)}async function V(t,e=1){const o="https://dummyjson.com/products/search",n=(e-1)*P,r=`${o}?q=${t}&limit=${P}&skip=${n}`;return C(r)}async function T(t){const o=`https://dummyjson.com/products/${t}`;return C(o)}const{theme:z}=M;function B(t,e){localStorage.setItem(t,JSON.stringify(e))}function p(t){return JSON.parse(localStorage.getItem(t))??[]}function j(t){localStorage.setItem(z,t)}function ut(){const t=localStorage.getItem(z);return t||"theme-light"}const{wishlist:pt}=M,{homeCategories:U,homeProducts:mt,modalProduct:S,cartBtnModal:G,wishlistBtnModal:X,wishlistProducts:E}=v;function R(t){return t.map(({id:e,title:o,brand:n,category:r,price:c,thumbnail:s})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${s}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${n}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
 </li>`).join("")}async function ft(){f();try{const{products:t,total:e}=await q(W);N(mt,t),x(e,W)}catch{a("Something went wrong while loading products. Please try again later.")}finally{h()}}function ht(t){return t.map(e=>`
    <li class="categories__item">
   <button class="categories__btn" type="button">${e}</button>
 </li>`).join("")}async function Kt(){try{const e=["All",...await lt()];if(e.length===0){g(U),d(!0);return}U.innerHTML=ht(e),d(!1)}catch{a("Something went wrong while loading categories. Please try again later.")}}function yt(t){const{title:e,description:o,price:n,tags:r,images:c,shippingInformation:s,returnPolicy:y}=t;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${et(r)}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${s}</p>
        <p class="modal-product__return-policy">Return Policy: ${y}</p>
        <p class="modal-product__price">Price: $${n}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function D(t){f();try{const e=await T(t);if(!e){g(S),d(!0);return}S.innerHTML=yt(e);const o=S.querySelector(".modal-product__buy-btn");o.dataset.id=e.id,console.log(o),G.dataset.id=e.id,X.dataset.id=e.id,d(!1)}catch{a("Failed to load product information. Please try again later.")}finally{h()}}function gt(t){return t.map(({id:e,title:o,brand:n,category:r,price:c,thumbnail:s,qty:y})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${s}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${n}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
    <p class="products__quantity">Quantity: ${y}</p>
 </li>`).join("")}function _t(t){const{title:e,description:o,price:n,tags:r,images:c,shippingInformation:s,returnPolicy:y,qty:it}=t;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${et(r)}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${s}</p>
        <p class="modal-product__return-policy">Return Policy: ${y}</p>
        <p class="modal-product__price">Price: $${n}</p>
        <p class="modal-product__quantity">Quantity: ${it}</p>
      </div>`}async function wt(t,e){f();try{const o=await T(t);if(!o){g(S),d(!0);return}const r=p(e).find(s=>s.id===t),c=(r==null?void 0:r.qty)||1;S.innerHTML=_t({...o,qty:c}),G.dataset.id=o.id,X.dataset.id=o.id,d(!1)}catch{a("Failed to load product information. Please try again later.")}finally{h()}}async function Pt(t,e){try{const o=await ot(e);if(o.length===0){g(t),d(!0);return}t.innerHTML=gt(o),d(!1)}catch{a("Failed to render products. Please try again later.")}}async function $t(){if(E){f();try{const t=await Bt(pt);if(console.log(t),t.length===0){g(E),d(!0);return}E.innerHTML=R(t),d(!1)}catch{a("Failed to render products. Please try again later.")}finally{h()}}}const{loadMoreBtn:Z,notFoundDiv:H,loader:tt}=v;async function C(t){const{data:e}=await dt.get(t);return e}function a(t){Y.error({message:t,position:"bottomRight",backgroundColor:"#ef4040",messageColor:"#ffffff",maxWidth:"400"})}function g(t){t.innerHTML=""}function St(t,e){const o=t.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),e.classList.add("categories__btn--active")}function m(t){Y.info({message:t,position:"center",maxWidth:"400",timeout:1500})}function bt(){const o=document.querySelector(".products__item").getBoundingClientRect().height;window.scrollBy({top:o*1.5,behavior:"smooth"})}function et(t){return t.map(e=>`<li>${e}</li>`).join("")}function Lt(){Z.hidden=!1}function A(){Z.hidden=!0}function x(t,e){e*12>=t?(m("There are no more products to load at the moment."),A()):Lt()}function N(t,e){t.insertAdjacentHTML("beforeend",R(e))}function O(t,e){if(!t||!e)return;const n=(p(e)||[]).reduce((r,{qty:c})=>r+c,0);t.textContent=n}async function ot(t){try{f();const e=p(t);return await Promise.all(e.map(async({id:n,qty:r})=>({...await T(n),qty:r})))}catch{return a("Failed to load products. Please try again later."),[]}finally{h()}}async function Bt(t){try{const e=p(t);return await Promise.all(e.map(async({id:n})=>await T(n)))}catch{return a("Failed to load products. Please try again later."),[]}}async function vt(t,e){if(!t||!e)return;const r=((await ot(e)).reduce((c,{price:s,qty:y})=>c+s*100*y,0)/100).toFixed(2);t.textContent=`$${r}`}function d(t){t?H.classList.add("not-found--visible"):H.classList.remove("not-found--visible")}function f(){tt.style.display="block"}function h(){tt.style.display="none"}const{modal:I,cartBtnModal:Ct,wishlistBtnModal:b,cartSpan:rt,cartProducts:qt,cartItems:It,cartTotal:Mt,wishlistSpan:nt}=v,{cart:l,wishlist:_}=M;function Tt(){I.classList.add("modal--is-open");const t=Number(b.dataset.id);p(_).findIndex(({id:n})=>n===t)!==-1?b.textContent="Remove from Wishlist":b.textContent="Add to Wishlist",I.addEventListener("click",st),window.addEventListener("keydown",at)}function u(){I.classList.remove("modal--is-open"),I.removeEventListener("click",st),window.removeEventListener("keydown",at)}function ct(t){const e=Number(t.dataset.id),o=p(l),n=o.findIndex(({id:c})=>c===e);n===-1?o.push({id:e,qty:1}):o[n].qty++,B(l,o);const r=o.reduce((c,{qty:s})=>c+s,0);rt.textContent=r,m("Product added to cart."),u()}function At(){const t=p(l),e=Number(Ct.dataset.id);if(!Array.isArray(t)||!e)return;const o=t.findIndex(({id:n})=>n===e);if(o!==-1&&t[o].qty>1)t[o].qty--,B(l,t),m("Product quantity decreased!");else{const n=t.filter(({id:r})=>r!==e);B(l,n),m("Product removed from cart!")}Pt(qt,l),u(),O(rt,l),O(It,l),vt(Mt,l)}function xt(){const t=Number(b.dataset.id),e=p(_);if(e.findIndex(({id:n})=>n===t)!==-1){m("Product is already in wishlist."),u();return}else{e.push({id:t,qty:1}),B(_,e);const n=e.reduce((r,{qty:c})=>r+c,0);nt.textContent=n,m("Product added to wishList."),u()}}function Et(){const t=p(_),e=Number(b.dataset.id);if(t.findIndex(({id:n})=>n===e)!==-1){const n=t.filter(({id:r})=>r!==e);B(_,n),m("Product removed from wishlist!")}u(),O(nt,_),$t()}function Ft(t){try{ct(t),u(),window.location.href="./cart.html"}catch(e){console.error("Error during modalBuyAction:",e),a("Failed to add product to cart. Please try again.")}}const{cart:kt}=M,{homeCategories:Ot,homeProducts:$,notFoundDiv:Rt,form:Q,cartProducts:Nt,wishlistProducts:Wt,body:F,goTopBtn:K,modalProduct:jt}=v;let L="",i=1,w="";async function Yt(t){if(t.target.classList.contains("categories__btn")){w=t.target.textContent.trim(),St(Ot,t.target),i=1,g($),A(),f();try{let e;w==="All"?e=await q(i):e=await J(w,i);const{products:o,total:n}=e;o.length===0?Rt.classList.add("not-found--visible"):(N($,o),x(n,i))}catch(e){console.error("Oops! Couldn't fetch products:",e),a("Oops! Couldn't fetch products. Check your connection or try again.")}finally{h()}}}async function Jt(t){if(t.preventDefault(),L=Q.elements.searchValue.value.trim(),!L){a("Please fill in the search field!");return}i=1,g($),A(),f();try{const{products:e,total:o}=await V(L,i);if(e.length===0){ft(),a("Unfortunately, no results were found for this query.");return}$.innerHTML=R(e),x(o,i)}catch(e){console.error("An error occurred while searching for products:",e),a("An error occurred while searching for products. Please try again later.")}finally{h(),Q.reset()}}async function Vt(t){const e=t.target.closest(".products__item");if(!e)return;const o=Number(e.dataset.id);!o||!e||($?await D(o):Nt?await wt(o,kt):Wt&&await D(o),Tt())}function st(t){const e=t.target.closest(".modal__close-btn"),o=t.target.closest(".modal-product__btn--cart"),n=t.target.closest(".modal-product__btn--wishlist"),r=jt.querySelector(".modal-product__buy-btn");if(t.target===t.currentTarget){u();return}if(e){u();return}else if(o){if(o.textContent.trim()==="Add to Cart"){ct(o);return}else if(o.textContent.trim()==="Remove from Cart"){At();return}}else if(n){if(n.textContent.trim()==="Add to Wishlist"){xt();return}else if(n.textContent.trim()==="Remove from Wishlist"){Et();return}}else if(r){Ft(r);return}}async function zt(t){const e=t.currentTarget;if(e){i++,e.disabled=!0,A(),f();try{let o;L?o=await V(L,i):w?w==="All"?o=await q(i):o=await J(w,i):o=await q(i);const{products:n,total:r}=o;n.length===0?m("No products found matching your search criteria."):(N($,n),setTimeout(()=>bt()),x(r,i),e.disabled=!1)}catch{a("Oops! Something went wrong. Please try again later.")}finally{h()}}}function Ut(){F.classList.contains("theme-light")?(F.classList.replace("theme-light","theme-dark"),j("theme-dark")):(F.classList.replace("theme-dark","theme-light"),j("theme-light"))}function Gt(){const t=window.pageYOffset,e=document.documentElement.clientHeight;t>e?K.classList.add("go-top--show"):K.classList.remove("go-top--show")}function Dt(){window.pageYOffset>0&&(window.scrollBy(0,-75),setTimeout(Dt,0))}function at(t){t.key==="Escape"&&u()}const{body:k,changeThemeBtn:Ht}=v;function Xt(){const t=ut();t?(k.classList.remove("theme-light","theme-dark"),k.classList.add(t)):k.classList.add("theme-light")}Ht.addEventListener("click",Ut);export{M as S,Xt as a,v as b,ft as c,Kt as d,Jt as e,vt as f,Dt as g,zt as h,Pt as i,Vt as o,$t as r,Yt as s,Gt as t,O as u};
//# sourceMappingURL=theme-C0uHtMzU.js.map
