import{i as Q,a as nt}from"./vendor-CG2pNq4b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const L={body:document.body,homeProducts:document.querySelector('.products[data-page="home"]'),wishlistProducts:document.querySelector('.products[data-page="wishlist"]'),homeCategories:document.querySelector(".categories"),notFoundDiv:document.querySelector(".not-found"),form:document.querySelector(".search-form"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),loadMoreBtn:document.querySelector(".load-more-btn"),cartBtnModal:document.querySelector(".modal-product__btn--cart"),wishlistBtnModal:document.querySelector(".modal-product__btn--wishlist"),cartProducts:document.querySelector('.products[data-page="cart"]'),cartSpan:document.querySelector("[data-cart-count]"),cartItems:document.querySelector("[data-count]"),cartTotal:document.querySelector("[data-price]"),wishlistSpan:document.querySelector("[data-wishlist-count]"),changeThemeBtn:document.querySelector("#themeToggle"),goTopBtn:document.querySelector(".go-top")},q={cart:"cart-products",wishlist:"wishlist-products",theme:"theme"},_=12;let R=1;async function v(t=1){const e=(t-1)*_,o=`https://dummyjson.com/products?limit=${_}&skip=${e}`;return B(o)}async function at(){return B("https://dummyjson.com/products/category-list")}async function K(t,e=1){const o="https://dummyjson.com/products/category/",c=(e-1)*_,r=`${o}${t}?limit=${_}&skip=${c}`;return B(r)}async function Y(t,e=1){const o="https://dummyjson.com/products/search",c=(e-1)*_,r=`${o}?q=${t}&limit=${_}&skip=${c}`;return B(r)}async function I(t){const o=`https://dummyjson.com/products/${t}`;return B(o)}const{theme:J}=q;function b(t,e){localStorage.setItem(t,JSON.stringify(e))}function p(t){return JSON.parse(localStorage.getItem(t))??[]}function N(t){localStorage.setItem(J,t)}function it(){const t=localStorage.getItem(J);return t||"theme-light"}const{wishlist:dt}=q,{homeCategories:W,homeProducts:lt,modalProduct:P,cartBtnModal:V,wishlistBtnModal:z,wishlistProducts:A}=L;function k(t){return t.map(({id:e,title:o,brand:c,category:r,price:s,thumbnail:n})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${n}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${c}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${s}</p>
 </li>`).join("")}async function ut(){try{const{products:t,total:e}=await v(R);O(lt,t),T(e,R)}catch{a("Something went wrong while loading products. Please try again later.")}}function pt(t){return t.map(e=>`
    <li class="categories__item">
   <button class="categories__btn" type="button">${e}</button>
 </li>`).join("")}async function Dt(){try{const e=["All",...await at()];if(e.length===0){h(W),d(!0);return}W.innerHTML=pt(e),d(!1)}catch{a("Something went wrong while loading categories. Please try again later.")}}function mt(t){const{title:e,description:o,price:c,tags:r,images:s,shippingInformation:n,returnPolicy:f}=t;return`<img class="modal-product__img" src="${(s==null?void 0:s[0])||""}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${X(r)}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${f}</p>
        <p class="modal-product__price">Price: $${c}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function j(t){try{const e=await I(t);if(!e){h(P),d(!0);return}P.innerHTML=mt(e);const o=P.querySelector(".modal-product__buy-btn");o.dataset.id=e.id,console.log(o),V.dataset.id=e.id,z.dataset.id=e.id,d(!1)}catch{a("Failed to load product information. Please try again later.")}}function ft(t){return t.map(({id:e,title:o,brand:c,category:r,price:s,thumbnail:n,qty:f})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${n}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${c}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${s}</p>
    <p class="products__quantity">Quantity: ${f}</p>
 </li>`).join("")}function ht(t){const{title:e,description:o,price:c,tags:r,images:s,shippingInformation:n,returnPolicy:f,qty:st}=t;return`<img class="modal-product__img" src="${(s==null?void 0:s[0])||""}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${X(r)}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${f}</p>
        <p class="modal-product__price">Price: $${c}</p>
        <p class="modal-product__quantity">Quantity: ${st}</p>
      </div>`}async function yt(t,e){try{const o=await I(t);if(!o){h(P),d(!0);return}const r=p(e).find(n=>n.id===t),s=(r==null?void 0:r.qty)||1;P.innerHTML=ht({...o,qty:s}),V.dataset.id=o.id,z.dataset.id=o.id,d(!1)}catch{a("Failed to load product information. Please try again later.")}}async function gt(t,e){try{const o=await Z(e);if(o.length===0){h(t),d(!0);return}t.innerHTML=ft(o),d(!1)}catch{a("Failed to render products. Please try again later.")}}async function _t(){if(A)try{const t=await St(dt);if(console.log(t),t.length===0){h(A),d(!0);return}A.innerHTML=k(t),d(!1)}catch{a("Failed to render products. Please try again later.")}}const{loadMoreBtn:G,notFoundDiv:U}=L;async function B(t){const{data:e}=await nt.get(t);return e}function a(t){Q.error({message:t,position:"bottomRight",backgroundColor:"#ef4040",messageColor:"#ffffff",maxWidth:"400"})}function h(t){t.innerHTML=""}function wt(t,e){const o=t.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),e.classList.add("categories__btn--active")}function m(t){Q.info({message:t,position:"center",maxWidth:"400",timeout:1500})}function Pt(){const o=document.querySelector(".products__item").getBoundingClientRect().height;window.scrollBy({top:o*1.5,behavior:"smooth"})}function X(t){return t.map(e=>`<li>${e}</li>`).join("")}function $t(){G.hidden=!1}function M(){G.hidden=!0}function T(t,e){e*12>=t?(m("There are no more products to load at the moment."),M()):$t()}function O(t,e){t.insertAdjacentHTML("beforeend",k(e))}function F(t,e){if(!t||!e)return;const c=(p(e)||[]).reduce((r,{qty:s})=>r+s,0);t.textContent=c}async function Z(t){try{const e=p(t);return await Promise.all(e.map(async({id:c,qty:r})=>({...await I(c),qty:r})))}catch{return a("Failed to load products. Please try again later."),[]}}async function St(t){try{const e=p(t);return await Promise.all(e.map(async({id:c})=>await I(c)))}catch{return a("Failed to load products. Please try again later."),[]}}async function bt(t,e){if(!t||!e)return;const r=((await Z(e)).reduce((s,{price:n,qty:f})=>s+n*100*f,0)/100).toFixed(2);t.textContent=`$${r}`}function d(t){t?U.classList.add("not-found--visible"):U.classList.remove("not-found--visible")}const{modal:C,cartBtnModal:Lt,wishlistBtnModal:$,cartSpan:tt,cartProducts:Bt,cartItems:vt,cartTotal:Ct,wishlistSpan:et}=L,{cart:l,wishlist:y}=q;function qt(){C.classList.add("modal--is-open");const t=Number($.dataset.id);p(y).findIndex(({id:c})=>c===t)!==-1?$.textContent="Remove from Wishlist":$.textContent="Add to Wishlist",C.addEventListener("click",rt),window.addEventListener("keydown",ct)}function u(){C.classList.remove("modal--is-open"),C.removeEventListener("click",rt),window.removeEventListener("keydown",ct)}function ot(t){const e=Number(t.dataset.id),o=p(l),c=o.findIndex(({id:s})=>s===e);c===-1?o.push({id:e,qty:1}):o[c].qty++,b(l,o);const r=o.reduce((s,{qty:n})=>s+n,0);tt.textContent=r,m("Product added to cart."),u()}function It(){const t=p(l),e=Number(Lt.dataset.id);if(!Array.isArray(t)||!e)return;const o=t.findIndex(({id:c})=>c===e);if(o!==-1&&t[o].qty>1)t[o].qty--,b(l,t),m("Product quantity decreased!");else{const c=t.filter(({id:r})=>r!==e);b(l,c),m("Product removed from cart!")}gt(Bt,l),u(),F(tt,l),F(vt,l),bt(Ct,l)}function Mt(){const t=Number($.dataset.id),e=p(y);if(e.findIndex(({id:c})=>c===t)!==-1){m("Product is already in wishlist."),u();return}else{e.push({id:t,qty:1}),b(y,e);const c=e.reduce((r,{qty:s})=>r+s,0);et.textContent=c,m("Product added to wishList."),u()}}function Tt(){const t=p(y),e=Number($.dataset.id);if(t.findIndex(({id:c})=>c===e)!==-1){const c=t.filter(({id:r})=>r!==e);b(y,c),m("Product removed from wishlist!")}u(),F(et,y),_t()}function At(t){try{ot(t),u(),window.location.href="./cart.html"}catch(e){console.error("Error during modalBuyAction:",e),a("Failed to add product to cart. Please try again.")}}const{cart:xt}=q,{homeCategories:Et,homeProducts:w,notFoundDiv:Ft,form:D,cartProducts:kt,wishlistProducts:Ot,body:x,goTopBtn:H,modalProduct:Rt}=L;let S="",i=1,g="";async function Ht(t){if(t.target.classList.contains("categories__btn")){g=t.target.textContent.trim(),wt(Et,t.target),i=1,h(w),M();try{let e;g==="All"?e=await v(i):e=await K(g,i);const{products:o,total:c}=e;o.length===0?Ft.classList.add("not-found--visible"):(O(w,o),T(c,i))}catch(e){console.error("Oops! Couldn't fetch products:",e),a("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function Qt(t){if(t.preventDefault(),i=1,h(w),M(),S=D.elements.searchValue.value.trim(),!S){a("Please fill in the search field!");return}try{const{products:e,total:o}=await Y(S,i);if(e.length===0){ut(),a("Unfortunately, no results were found for this query.");return}w.innerHTML=k(e),T(o,i)}catch(e){console.error("An error occurred while searching for products:",e),a("An error occurred while searching for products. Please try again later.")}finally{D.reset()}}async function Kt(t){const e=t.target.closest(".products__item");if(!e)return;const o=Number(e.dataset.id);!o||!e||(w?await j(o):kt?await yt(o,xt):Ot&&await j(o),qt())}function rt(t){const e=t.target.closest(".modal__close-btn"),o=t.target.closest(".modal-product__btn--cart"),c=t.target.closest(".modal-product__btn--wishlist"),r=Rt.querySelector(".modal-product__buy-btn");if(t.target===t.currentTarget){u();return}if(e){u();return}else if(o){if(o.textContent.trim()==="Add to Cart"){ot(o);return}else if(o.textContent.trim()==="Remove from Cart"){It();return}}else if(c){if(c.textContent.trim()==="Add to Wishlist"){Mt();return}else if(c.textContent.trim()==="Remove from Wishlist"){Tt();return}}else if(r){At(r);return}}async function Yt(t){const e=t.currentTarget;if(e){i++,e.disabled=!0,M();try{let o;S?o=await Y(S,i):g?g==="All"?o=await v(i):o=await K(g,i):o=await v(i);const{products:c,total:r}=o;c.length===0?m("No products found matching your search criteria."):(O(w,c),setTimeout(()=>Pt()),T(r,i),e.disabled=!1)}catch{a("Oops! Something went wrong. Please try again later.")}}}function Nt(){x.classList.contains("theme-light")?(x.classList.replace("theme-light","theme-dark"),N("theme-dark")):(x.classList.replace("theme-dark","theme-light"),N("theme-light"))}function Jt(){const t=window.pageYOffset,e=document.documentElement.clientHeight;t>e?H.classList.add("go-top--show"):H.classList.remove("go-top--show")}function Wt(){window.pageYOffset>0&&(window.scrollBy(0,-75),setTimeout(Wt,0))}function ct(t){t.key==="Escape"&&u()}const{body:E,changeThemeBtn:jt}=L;function Vt(){const t=it();t?(E.classList.remove("theme-light","theme-dark"),E.classList.add(t)):E.classList.add("theme-light")}jt.addEventListener("click",Nt);export{q as S,Vt as a,L as b,ut as c,Dt as d,Qt as e,bt as f,Wt as g,Yt as h,gt as i,Kt as o,_t as r,Ht as s,Jt as t,F as u};
//# sourceMappingURL=theme-CxzVhMPW.js.map
