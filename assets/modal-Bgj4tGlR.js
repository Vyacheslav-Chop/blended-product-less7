import{i as P,a as q}from"./vendor-CG2pNq4b.js";const k={cart:"cart-products",wishlist:"wishlist-products"},i=12;let $=1;const g={homeProducts:document.querySelector('.products[data-page="home"]'),wishListProducts:document.querySelector('.products[data-page="wishlist"]'),homeCategories:document.querySelector(".categories"),notFoundDiv:document.querySelector(".not-found"),form:document.querySelector(".search-form"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),loadMoreBtn:document.querySelector(".load-more-btn"),addToCartBtn:document.querySelector(".modal-product__btn--cart")},{loadMoreBtn:S,homeProducts:et}=g;async function p(o){const{data:t}=await q.get(o);return t}function s(o){P.error({message:o,position:"bottomRight",backgroundColor:"#ef4040",messageColor:"#ffffff",maxWidth:"400"})}function C(o){o.innerHTML=""}function E(o,t){const e=o.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function B(o){P.info({message:o,position:"bottomCenter",maxWidth:"400"})}function I(){const e=document.querySelector(".products__item").getBoundingClientRect().height;window.scrollBy({top:e*1.5,behavior:"smooth"})}function R(o){return o.map(t=>`<li>${t}</li>`).join("")}function j(){S.hidden=!1}function L(){S.hidden=!0}function h(o,t){console.log(`Current page: ${t}, Total: ${o}`),t*12>=o?(B("There are no more products to load at the moment."),L(),console.log("No more products to load. Button hidden.")):(j(),console.log("More products available. Button shown."))}function y(o,t){o.insertAdjacentHTML("beforeend",F(t))}async function m(o=1){const t=(o-1)*i,e=`https://dummyjson.com/products?limit=${i}&skip=${t}`;return p(e)}async function U(){return p("https://dummyjson.com/products/category-list")}async function M(o,t=1){const e="https://dummyjson.com/products/category/",r=(t-1)*i,n=`${e}${o}?limit=${i}&skip=${r}`;return p(n)}async function v(o,t=1){const e="https://dummyjson.com/products/search",r=(t-1)*i,n=`${e}?q=${o}&limit=${i}&skip=${r}`;return p(n)}async function x(o){const e=`https://dummyjson.com/products/${o}`;return p(e)}const{homeCategories:O,homeProducts:N,modalProduct:D,addToCartBtn:H}=g;function F(o){return o.map(({id:t,title:e,brand:r,category:n,price:l,thumbnail:_})=>`
  <li class="products__item" data-id="${t}">
    <img class="products__image" src="${_}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${r}</p>
    <p class="products__category">Category: ${n}</p>
    <p class="products__price">Price: $${l}</p>
 </li>`).join("")}async function J(){try{const{products:o,total:t}=await m($);y(N,o),h(t,$)}catch(o){console.error("Error while fetching products:",o),s("Something went wrong while loading products. Please try again later.")}}function W(o){return o.map(t=>`
    <li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join("")}async function rt(){try{const t=["All",...await U()];O.innerHTML=W(t)}catch{s("Something went wrong while loading categories. Please try again later.")}}function z(o){const{title:t,description:e,price:r,tags:n,images:l,shippingInformation:_,returnPolicy:T}=o;return`<img class="modal-product__img" src="${(l==null?void 0:l[0])||""}" alt="${t}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${R(n)}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${_}</p>
        <p class="modal-product__return-policy">Return Policy: ${T}</p>
        <p class="modal-product__price">Price: $${r}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function G(o){try{const t=await x(o);console.log(t),D.innerHTML=z(t),H.dataset.id=t.id}catch{s("Failed to load product information. Please try again later.")}}const{homeCategories:K,homeProducts:u,notFoundDiv:V,form:w}=g;let d="",c=1,a="";async function ct(o){if(o.target.classList.contains("categories__btn")){a=o.target.textContent.trim(),E(K,o.target),c=1,C(u);try{let t;a==="All"?t=await m(c):t=await M(a,c);const{products:e,total:r}=t;e.length===0?V.classList.add("not-found--visible"):(y(u,e),h(r,c))}catch(t){console.error("Oops! Couldn't fetch products:",t),s("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function nt(o){if(o.preventDefault(),c=1,C(u),d=w.elements.searchValue.value.trim(),!d){s("Please fill in the search field!");return}try{const{products:t,total:e}=await v(d,c);if(t.length===0){J(),s("Unfortunately, no results were found for this query.");return}y(u,t),h(e,c)}catch(t){console.error("An error occurred while searching for products:",t),s("An error occurred while searching for products. Please try again later.")}finally{w.reset()}}function A(o){const t=o.target.closest(".modal__close-btn"),e=o.target.closest(".modal-product__btn--cart");o.target.closest("modal-product__btn--wishlist"),t?Z():e&&tt()}async function st(o){const t=o.currentTarget;if(t){c++,t.disabled=!0,L();try{let e;d?e=await v(d,c):a?a==="All"?e=await m(c):e=await M(a,c):e=await m(c);const{products:r,total:n}=e;r.length===0?B("No products found matching your search criteria."):(y(u,r),setTimeout(()=>I()),h(n,c),t.disabled=!1)}catch{s("Oops! Something went wrong. Please try again later.")}}}function Y(o,t){localStorage.setItem(o,JSON.stringify(t))}const{modal:f,addToCartBtn:Q}=g,{cart:b,wishlist:at}=k;function X(){f.classList.add("modal--is-open"),f.addEventListener("click",A)}function Z(){f.classList.remove("modal--is-open"),f.removeEventListener("click",A)}function it(o){const t=o.target.closest(".products__item");if(!t)return;const e=Number(t.dataset.id);e&&(G(e),X())}function tt(o){const t=Number(Q.dataset.id);console.log(t);const e=JSON.parse(localStorage.getItem(b))??[];console.log(e);const r=e.findIndex(({id:n})=>n===t);r===-1?(e.push({id:t,qty:1}),console.log(e)):e[r].qty++,Y(b,e)}export{rt as a,nt as b,g as c,st as h,it as o,J as r,ct as s};
//# sourceMappingURL=modal-Bgj4tGlR.js.map
