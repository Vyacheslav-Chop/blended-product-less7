{"version":3,"file":"theme-C0uHtMzU.js","sources":["../../src/js/refs.js","../../src/js/constants.js","../../src/js/products-api.js","../../src/js/storage.js","../../src/js/render-function.js","../../src/js/helpers.js","../../src/js/modal.js","../../src/js/handlers.js","../../src/js/theme.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\nexport const refs = {\n  body: document.body,\n  homeProducts: document.querySelector('.products[data-page=\"home\"]'),\n  wishlistProducts: document.querySelector('.products[data-page=\"wishlist\"]'),\n  homeCategories: document.querySelector('.categories'),\n  notFoundDiv: document.querySelector('.not-found'),\n  form: document.querySelector('.search-form'),\n  modalProduct: document.querySelector('.modal-product'),\n  modal: document.querySelector('.modal'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  cartBtnModal: document.querySelector('.modal-product__btn--cart'),\n  wishlistBtnModal: document.querySelector('.modal-product__btn--wishlist'),\n  cartProducts: document.querySelector('.products[data-page=\"cart\"]'),\n  cartSpan: document.querySelector('[data-cart-count]'),\n  cartItems: document.querySelector('[data-count]'),\n  cartTotal: document.querySelector('[data-price]'),\n  wishlistSpan: document.querySelector('[data-wishlist-count]'),\n  changeThemeBtn: document.querySelector('#themeToggle'),\n  goTopBtn: document.querySelector('.go-top'),\n  loader: document.querySelector('.loader'),\n};\n\n ","//Константи\n\nexport const STORAGE_KEYS = {\n  cart: 'cart-products',\n  wishlist: 'wishlist-products',\n  theme: 'theme'\n};\n\nexport const limit = 12;\nexport let currentPage = 1;\n","// Функції для роботи з бекендом\nimport { limit } from './constants';\nimport { fetchData } from './helpers';\n// пошук прайса\nexport async function fetchProducts(currentPage = 1) {\n  const skip = (currentPage - 1) * limit;\n  const url = `https://dummyjson.com/products?limit=${limit}&skip=${skip}`;\n  return fetchData(url);\n}\n// пошук категорій\nexport async function fetchCategories() {\n  const BASE_URL = 'https://dummyjson.com/products/category-list';\n  return fetchData(BASE_URL);\n}\n// пошук за категорією\nexport async function fetchCategoryProducts(category, currentPage = 1) {\n  const BASE_URL = 'https://dummyjson.com/products/category/';\n  const skip = (currentPage - 1) * limit;\n  const url = `${BASE_URL}${category}?limit=${limit}&skip=${skip}`;\n  return fetchData(url);\n}\n// пошук за значенням з інпуту\nexport async function fetchSearchResults(query, currentPage = 1) {\n  const BASE_URL = 'https://dummyjson.com/products/search';\n  const skip = (currentPage - 1) * limit;\n  const url = `${BASE_URL}?q=${query}&limit=${limit}&skip=${skip}`;\n  return fetchData(url);\n}\n// пошук для модалки\nexport async function fetchProductById(id) {\n  const BASE_URL = 'https://dummyjson.com/products/';\n  const url = `${BASE_URL}${id}`;\n  return fetchData(url);\n}\n","//Робота з loacalStorage\nimport { STORAGE_KEYS } from \"./constants\";\nconst { theme } = STORAGE_KEYS;\n// оновлення хранилища\nexport function updateLocalStorage(key, arr) {\n  localStorage.setItem(key, JSON.stringify(arr));\n}\n// отримання даних з локального хранилища\nexport function getFromLocalStorage(key) {\n  return JSON.parse(localStorage.getItem(key)) ?? [];\n}\n\nexport function saveThemeToLocalStorage(themeValue) {\n  localStorage.setItem(theme, themeValue);\n}\n\nexport function loadThemeFromLocalStorage() {\n  const savedTheme = localStorage.getItem(theme);\n  return savedTheme ? savedTheme : 'theme-light';\n}","//Функцію для створення, рендеру або видалення розмітки\nimport {\n  fetchProducts,\n  fetchCategories,\n  fetchProductById,\n} from './products-api';\nimport { refs } from './refs';\nimport {\n  showErrorMessage,\n  createTags,\n  appendProducts,\n  checkEndOfCollection,\n  clearContent,\n  toggleNotFoundVisibility,\n  hideLoader,\n  showLoader,\n} from './helpers';\nimport { currentPage } from './constants';\nimport { getFromLocalStorage } from './storage';\nimport { getProductsWithDetails, getProductsWithDetailsNoQty } from './helpers';\nimport { STORAGE_KEYS } from './constants';\nconst { wishlist } = STORAGE_KEYS;\nconst {\n  homeCategories,\n  homeProducts,\n  modalProduct,\n  cartBtnModal,\n  wishlistBtnModal,\n  wishlistProducts,\n} = refs;\n// функції для рендеру товарів\nexport function productsMarkUp(products) {\n  return products\n    .map(\n      ({ id, title, brand, category, price, thumbnail }) => `\n  <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: $${price}</p>\n </li>`\n    )\n    .join('');\n}\n\nexport async function renderProducts() {\n  showLoader();\n  try {\n    const { products, total } = await fetchProducts(currentPage);\n    appendProducts(homeProducts, products);\n    checkEndOfCollection(total, currentPage);\n  } catch (error) {\n    showErrorMessage(\n      'Something went wrong while loading products. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n  }\n}\n\n// функції для рендеру кнопок категорій\n\nexport function categoriesMarkUp(arr) {\n  return arr\n    .map(\n      category => `\n    <li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>`\n    )\n    .join('');\n}\n\nexport async function renderCategories() {\n  try {\n    const categories = await fetchCategories();\n    const allCategories = ['All', ...categories];\n\n    if (allCategories.length === 0) {\n      clearContent(homeCategories);\n      toggleNotFoundVisibility(true);\n      return;\n    }\n    homeCategories.innerHTML = categoriesMarkUp(allCategories);\n    toggleNotFoundVisibility(false);\n  } catch (error) {\n    showErrorMessage(\n      'Something went wrong while loading categories. Please try again later.'\n    );\n  }\n}\n\n// функції для створення модального вікна\nfunction createProductById(product) {\n  const {\n    title,\n    description,\n    price,\n    tags,\n    images,\n    shippingInformation,\n    returnPolicy,\n  } = product;\n  return `<img class=\"modal-product__img\" src=\"${\n    images?.[0] || ''\n  }\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${createTags(tags)}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: $${price}</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`;\n}\n\nexport async function renderProductById(id) {\n  showLoader();\n  try {\n    const product = await fetchProductById(id);\n    if (!product) {\n      clearContent(modalProduct);\n      toggleNotFoundVisibility(true);\n      return;\n    }\n\n    modalProduct.innerHTML = createProductById(product);\n    const modalBuyBtn = modalProduct.querySelector('.modal-product__buy-btn');\n    modalBuyBtn.dataset.id = product.id;\n    console.log(modalBuyBtn);\n    cartBtnModal.dataset.id = product.id;\n    wishlistBtnModal.dataset.id = product.id;\n    toggleNotFoundVisibility(false);\n  } catch (error) {\n    showErrorMessage(\n      'Failed to load product information. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n  }\n}\n// створення розмітки для карти чи бажань\nexport function productsMarkUpSavedItems(products) {\n  return products\n    .map(\n      ({ id, title, brand, category, price, thumbnail, qty }) => `\n  <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: $${price}</p>\n    <p class=\"products__quantity\">Quantity: ${qty}</p>\n </li>`\n    )\n    .join('');\n}\n// створення модалки в корзині чи в бажаннях\nfunction createProductByIdSavedItems(product) {\n  const {\n    title,\n    description,\n    price,\n    tags,\n    images,\n    shippingInformation,\n    returnPolicy,\n    qty,\n  } = product;\n  return `<img class=\"modal-product__img\" src=\"${\n    images?.[0] || ''\n  }\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${createTags(tags)}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: $${price}</p>\n        <p class=\"modal-product__quantity\">Quantity: ${qty}</p>\n      </div>`;\n}\n// рендер модалки (відмалювання)\nexport async function renderProductByIdSavedItems(id, key) {\n  showLoader();\n  try {\n    const product = await fetchProductById(id);\n    if (!product) {\n      clearContent(modalProduct);\n      toggleNotFoundVisibility(true);\n      return;\n    }\n    const productsFromLocal = getFromLocalStorage(key);\n    const itemInLocal = productsFromLocal.find(item => item.id === id);\n    const qty = itemInLocal?.qty || 1;\n\n\n    modalProduct.innerHTML = createProductByIdSavedItems({ ...product, qty });\n     \n    cartBtnModal.dataset.id = product.id;\n    wishlistBtnModal.dataset.id = product.id;\n    toggleNotFoundVisibility(false);\n  } catch (error) {\n    showErrorMessage(\n      'Failed to load product information. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n  }\n}\n\n// рендер (відмалювання) продуктів корзини чи бажання\nexport async function renderProductsInContainer(container, key) {\n  try {\n    const products = await getProductsWithDetails(key);\n    if (products.length === 0) {\n      clearContent(container);\n      toggleNotFoundVisibility(true);\n      return;\n    }\n    container.innerHTML = productsMarkUpSavedItems(products);\n    toggleNotFoundVisibility(false);\n  } catch (error) {\n    showErrorMessage('Failed to render products. Please try again later.');\n  }\n}\n\nexport async function renderProductsInWishlist() {\n  if (!wishlistProducts) return;\n  showLoader();\n  try {\n    const products = await getProductsWithDetailsNoQty(wishlist);\n    console.log(products);\n    if (products.length === 0) {\n      clearContent(wishlistProducts);\n      toggleNotFoundVisibility(true);\n      return;\n    }\n\n    wishlistProducts.innerHTML = productsMarkUp(products);\n    toggleNotFoundVisibility(false);\n  } catch (error) {\n    showErrorMessage('Failed to render products. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport { refs } from './refs';\nimport { productsMarkUp } from './render-function';\nconst { loadMoreBtn, notFoundDiv, loader } = refs;\nimport { getFromLocalStorage } from './storage';\nimport { fetchProductById } from './products-api';\n//Допоміжні функції\n// функція для запиту через бібліотеку\nexport async function fetchData(url) {\n  const { data } = await axios.get(url);\n  return data;\n}\n// функція для виведення повідомлення про помилку через бібліотеку\nexport function showErrorMessage(message) {\n  iziToast.error({\n    message,\n    position: 'bottomRight',\n    backgroundColor: '#ef4040',\n    messageColor: '#ffffff',\n    maxWidth: '400',\n  });\n}\n// функція очищення контенту\nexport function clearContent(container) {\n  container.innerHTML = '';\n}\n// Функція для активності кнопки\nexport function updateActiveCategoryBtn(container, targetBtn) {\n  const prevActive = container.querySelector('.categories__btn--active');\n  if (prevActive) {\n    prevActive.classList.remove('categories__btn--active');\n  }\n  targetBtn.classList.add('categories__btn--active');\n}\n// функція для повідомлень через бібліотеку\nexport function showInfoMessage(message) {\n  iziToast.info({\n    message,\n    position: 'center',\n    maxWidth: '400',\n    timeout: 1500,\n  });\n}\n// плавний скрол при підвантажені товарів\nexport function smoothScroll() {\n  const galleryItem = document.querySelector('.products__item');\n  const rect = galleryItem.getBoundingClientRect();\n  const heightItem = rect.height;\n\n  window.scrollBy({\n    top: heightItem * 1.5,\n    behavior: 'smooth',\n  });\n}\n// функція для роботи з тегами після запитів\nexport function createTags(tags) {\n  return tags.map(tag => `<li>${tag}</li>`).join('');\n}\n\n// виводить кнопку для додаткового підвантаження товарів\nexport function showLoadMoreBtn() {\n  loadMoreBtn.hidden = false;\n}\n// ховає кнопку для додаткового підвантаження товарів\nexport function hideLoadMoreBtn() {\n  loadMoreBtn.hidden = true;\n}\n// перевірка чи лишився ще товар для підвантаження\nexport function checkEndOfCollection(total, currentPage) {\n\n  if (currentPage * 12 >= total) {\n    showInfoMessage('There are no more products to load at the moment.');\n    hideLoadMoreBtn();\n  } else {\n    showLoadMoreBtn();\n  }\n}\n// додавання DOM елементів\nexport function appendProducts(element, products) {\n  element.insertAdjacentHTML('beforeend', productsMarkUp(products));\n}\n// оновлення індикатору корзини чи бажань\nexport function updateCartIndicator(box, key) {\n  if (!box || !key) return;\n\n  const idAllProducts = getFromLocalStorage(key) || [];\n  const totalQty = idAllProducts.reduce((count, { qty }) => count + qty, 0);\n  box.textContent = totalQty;\n}\n// функція для отримання списку продуктів в корзині чи бажаннях\nexport async function getProductsWithDetails(key) {\n  try {\n    showLoader();\n    const idAllProducts = getFromLocalStorage(key);\n    const products = await Promise.all(\n      idAllProducts.map(async ({ id, qty }) => {\n        const product = await fetchProductById(id);\n        return { ...product, qty };\n      })\n    );\n    return products;\n  } catch (error) {\n    showErrorMessage('Failed to load products. Please try again later.');\n    return [];\n  } finally {\n    hideLoader();\n  }\n}\n\nexport async function getProductsWithDetailsNoQty(key) {\n  try {\n    const idAllProducts = getFromLocalStorage(key);\n    const products = await Promise.all(\n      idAllProducts.map(async ({ id }) => {\n        const product = await fetchProductById(id);\n        return product;\n      })\n    );\n    return products;\n  } catch (error) {\n    showErrorMessage('Failed to load products. Please try again later.');\n    return [];\n  }\n}\n// функція підрахунку вартості\nexport async function updateCartSum(box, key) {\n  if (!box || !key) return;\n\n  const products = await getProductsWithDetails(key);\n\n  const totalCent = products.reduce(\n    (total, { price, qty }) => total + price * 100 * qty,\n    0\n  );\n\n  const totalPrice = (totalCent / 100).toFixed(2);\n  box.textContent = `$${totalPrice}`;\n}\n// функція для контенту якщо нічого не знайдено (в якості аргумента використовується true або false)\nexport function toggleNotFoundVisibility(isVisible) {\n  isVisible\n    ? notFoundDiv.classList.add('not-found--visible')\n    : notFoundDiv.classList.remove('not-found--visible');\n}\n\nexport function showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nimport { refs } from './refs';\nconst {\n  modal,\n  cartBtnModal,\n  wishlistBtnModal,\n  cartSpan,\n  cartProducts,\n  cartItems,\n  cartTotal,\n  wishlistSpan,\n\n} = refs;\nimport { handleModalClick, handleKeyDown } from './handlers';\nimport { STORAGE_KEYS } from './constants';\nimport { updateLocalStorage, getFromLocalStorage } from './storage';\nimport { showErrorMessage, showInfoMessage } from './helpers';\nimport {\n  renderProductsInContainer,\n  renderProductsInWishlist,\n} from './render-function';\nimport { updateCartIndicator, updateCartSum } from './helpers';\n\nconst { cart, wishlist } = STORAGE_KEYS;\n// відкриття модалки\nexport function openModal() {\n  modal.classList.add('modal--is-open');\n  const productId = Number(wishlistBtnModal.dataset.id);\n\n  const idAllProducts = getFromLocalStorage(wishlist);\n\n  const index = idAllProducts.findIndex(({ id }) => id === productId);\n  if (index !== -1) {\n    wishlistBtnModal.textContent = 'Remove from Wishlist';\n  } else {\n    wishlistBtnModal.textContent = 'Add to Wishlist';\n  }\n  modal.addEventListener('click', handleModalClick);\n  window.addEventListener('keydown', handleKeyDown);\n}\n\n// закриття модалки\nexport function closeModal() {\n  modal.classList.remove('modal--is-open');\n  modal.removeEventListener('click', handleModalClick);\n  window.removeEventListener('keydown', handleKeyDown);\n}\n\n// додавання товару до кошику\nexport function addToCart(button) {\n  const productId = Number(button.dataset.id);\n\n  const idAllProducts = getFromLocalStorage(cart);\n\n  const index = idAllProducts.findIndex(({ id }) => id === productId);\n\n  if (index === -1) {\n    idAllProducts.push({ id: productId, qty: 1 });\n\n  } else {\n    idAllProducts[index].qty++;\n  }\n  updateLocalStorage(cart, idAllProducts);\n  const totalQty = idAllProducts.reduce((count, { qty }) => count + qty, 0);\n  cartSpan.textContent = totalQty;\n  showInfoMessage('Product added to cart.');\n  closeModal();\n}\n// віднімання або видалення товару з кошику\nexport function removeFromCart() {\n  const products = getFromLocalStorage(cart);\n\n  const currentId = Number(cartBtnModal.dataset.id);\n  if (!Array.isArray(products) || !currentId) return;\n\n  const index = products.findIndex(({ id }) => id === currentId);\n  if (index !== -1 && products[index].qty > 1) {\n    products[index].qty--;\n    updateLocalStorage(cart, products);\n    showInfoMessage('Product quantity decreased!');\n  } else {\n    const newProducts = products.filter(({ id }) => id !== currentId);\n    updateLocalStorage(cart, newProducts);\n    showInfoMessage('Product removed from cart!');\n  }\n  renderProductsInContainer(cartProducts, cart);\n  closeModal();\n  updateCartIndicator(cartSpan, cart);\n  updateCartIndicator(cartItems, cart);\n  updateCartSum(cartTotal, cart);\n}\n// додавання товару до списку бажань\nexport function addToWishList() {\n  const productId = Number(wishlistBtnModal.dataset.id);\n\n  const idAllProducts = getFromLocalStorage(wishlist);\n\n  const index = idAllProducts.findIndex(({ id }) => id === productId);\n  if (index !== -1) {\n    showInfoMessage('Product is already in wishlist.');\n    closeModal();\n    return;\n  } else {\n    idAllProducts.push({ id: productId, qty: 1 });\n    updateLocalStorage(wishlist, idAllProducts);\n    const totalQty = idAllProducts.reduce((count, { qty }) => count + qty, 0);\n    wishlistSpan.textContent = totalQty;\n    showInfoMessage('Product added to wishList.');\n    closeModal();\n  }\n}\n// видалення товару зі списку бажань\nexport function removeFromWishList() {\n  const products = getFromLocalStorage(wishlist);\n  const currentId = Number(wishlistBtnModal.dataset.id);\n  const index = products.findIndex(({ id }) => id === currentId);\n\n  if (index !== -1) {\n    const newProducts = products.filter(({ id }) => id !== currentId);\n    updateLocalStorage(wishlist, newProducts);\n    showInfoMessage('Product removed from wishlist!');\n  }\n  closeModal();\n  updateCartIndicator(wishlistSpan, wishlist);\n  renderProductsInWishlist();\n}\n\nexport function modalBuyAction(button) {\n  try {\n    addToCart(button);\n    closeModal();\n    window.location.href = './cart.html';\n  } catch (error) {\n    console.error('Error during modalBuyAction:', error);\n    showErrorMessage('Failed to add product to cart. Please try again.');\n  }\n}\n","// Функції, які передаються колбеками в addEventListner\nimport { refs } from './refs';\nimport {\n  fetchProducts,\n  fetchCategoryProducts,\n  fetchSearchResults,\n} from './products-api';\nimport {\n  updateActiveCategoryBtn,\n  clearContent,\n  showErrorMessage,\n  showInfoMessage,\n  smoothScroll,\n  hideLoadMoreBtn,\n  checkEndOfCollection,\n  appendProducts,\n  showLoader,\n  hideLoader,\n} from './helpers';\nimport {\n  renderProducts,\n  productsMarkUp,\n  renderProductById,\n  renderProductByIdSavedItems,\n} from './render-function';\nimport {\n  closeModal,\n  addToCart,\n  addToWishList,\n  removeFromWishList,\n  removeFromCart,\n  openModal,\n  modalBuyAction,\n} from './modal';\n\nimport { saveThemeToLocalStorage } from './storage';\nimport { STORAGE_KEYS } from './constants';\nconst { cart } = STORAGE_KEYS;\n\nconst {\n  homeCategories,\n  homeProducts,\n  notFoundDiv,\n  form,\n  cartProducts,\n  wishlistProducts,\n  body,\n  goTopBtn,\n  modalProduct,\n} = refs;\nlet query = '';\nlet currentPage = 1;\nlet category = '';\n// вивід списку продуктів за категорією\nexport async function showProducts(ev) {\n  if (!ev.target.classList.contains('categories__btn')) return;\n  category = ev.target.textContent.trim();\n\n  updateActiveCategoryBtn(homeCategories, ev.target);\n  currentPage = 1;\n  clearContent(homeProducts);\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    let data;\n    if (category === 'All') {\n      data = await fetchProducts(currentPage);\n    } else {\n      data = await fetchCategoryProducts(category, currentPage);\n    }\n\n    const { products, total } = data;\n\n    if (products.length === 0) {\n      notFoundDiv.classList.add('not-found--visible');\n    } else {\n      appendProducts(homeProducts, products);\n\n      checkEndOfCollection(total, currentPage);\n    }\n  } catch (error) {\n    console.error(\"Oops! Couldn't fetch products:\", error);\n    showErrorMessage(\n      \"Oops! Couldn't fetch products. Check your connection or try again.\"\n    );\n  } finally {\n    hideLoader();\n  }\n}\n// пошук продуктів форми пошуку\nexport async function searchProduct(event) {\n  event.preventDefault();\n\n   query = form.elements['searchValue'].value.trim();\n   if (!query) {\n     showErrorMessage('Please fill in the search field!');\n     return;\n  }\n  \n  currentPage = 1;\n  clearContent(homeProducts);\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const { products, total } = await fetchSearchResults(query, currentPage);\n\n    if (products.length === 0) {\n      renderProducts();\n      showErrorMessage('Unfortunately, no results were found for this query.');\n      return;\n    }\n    homeProducts.innerHTML = productsMarkUp(products);\n    checkEndOfCollection(total, currentPage);\n  } catch (error) {\n    console.error('An error occurred while searching for products:', error);\n    showErrorMessage(\n      'An error occurred while searching for products. Please try again later.'\n    );\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\n// відкриття модалки за обраним товаром\nexport async function openProductModal(event) {\n  const liElement = event.target.closest('.products__item');\n\n  if (!liElement) {\n    return;\n  }\n  const currentId = Number(liElement.dataset.id);\n\n  if (!currentId || !liElement) {\n    return;\n  }\n\n  if (homeProducts) {\n    await renderProductById(currentId);\n  } else if (cartProducts) {\n    await renderProductByIdSavedItems(currentId, cart);\n  } else if (wishlistProducts) {\n    await renderProductById(currentId);\n  }\n\n  openModal();\n}\n\n// слухач на модалку\nexport function handleModalClick(ev) {\n  const closeBtn = ev.target.closest('.modal__close-btn');\n  const cartBtnModal = ev.target.closest('.modal-product__btn--cart');\n  const wishlistBtnModal = ev.target.closest('.modal-product__btn--wishlist');\n  const modalBuyBtn = modalProduct.querySelector('.modal-product__buy-btn');\n\n  if (ev.target === ev.currentTarget) {\n    closeModal();\n    return;\n  }\n\n  if (closeBtn) {\n    closeModal();\n    return;\n  } else if (cartBtnModal) {\n    if (cartBtnModal.textContent.trim() === 'Add to Cart') {\n      addToCart(cartBtnModal);\n      return;\n    } else if (cartBtnModal.textContent.trim() === 'Remove from Cart') {\n      removeFromCart();\n      return;\n    }\n  } else if (wishlistBtnModal) {\n    if (wishlistBtnModal.textContent.trim() === 'Add to Wishlist') {\n      addToWishList();\n      return;\n    } else if (wishlistBtnModal.textContent.trim() === 'Remove from Wishlist') {\n      removeFromWishList();\n      return;\n    }\n  } else if (modalBuyBtn) {\n    modalBuyAction(modalBuyBtn);\n    return;\n  }\n}\n// показати більше\nexport async function handleLoadMore(ev) {\n  const loadMoreBtn = ev.currentTarget;\n  if (!loadMoreBtn) return;\n\n  currentPage++;\n  loadMoreBtn.disabled = true;\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    let data;\n    if (query) {\n      data = await fetchSearchResults(query, currentPage);\n    } else if (category) {\n      if (category === 'All') {\n        data = await fetchProducts(currentPage);\n      } else {\n        data = await fetchCategoryProducts(category, currentPage);\n      }\n    } else {\n      data = await fetchProducts(currentPage);\n    }\n    const { products, total } = data;\n\n    if (products.length === 0) {\n      showInfoMessage('No products found matching your search criteria.');\n    } else {\n      appendProducts(homeProducts, products);\n      setTimeout(() => smoothScroll());\n      checkEndOfCollection(total, currentPage);\n      loadMoreBtn.disabled = false;\n    }\n  } catch (error) {\n    showErrorMessage('Oops! Something went wrong. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nexport function handleChangeTheme() {\n  if (body.classList.contains('theme-light')) {\n    body.classList.replace('theme-light', 'theme-dark');\n    saveThemeToLocalStorage('theme-dark');\n  } else {\n    body.classList.replace('theme-dark', 'theme-light');\n    saveThemeToLocalStorage('theme-light');\n  }\n}\n\nexport function trackScroll() {\n  const Offset = window.pageYOffset;\n  // вичисляєм висоту вікна браузера\n  const coords = document.documentElement.clientHeight;\n  if (Offset > coords) {\n    goTopBtn.classList.add('go-top--show');\n  } else {\n    goTopBtn.classList.remove('go-top--show');\n  }\n}\n\nexport function goTop() {\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -75);\n    setTimeout(goTop, 0);\n  }\n}\n\nexport function handleKeyDown(ev) {\n  if (ev.key === 'Escape') {\n    closeModal();\n  }\n}\n","import { loadThemeFromLocalStorage } from \"./storage\";\nimport { refs } from \"./refs\";\nconst { body, changeThemeBtn } = refs;\nimport { handleChangeTheme } from \"./handlers\";\n\n\nexport function applySavedTheme() {\n  const savedTheme = loadThemeFromLocalStorage();\n  if (savedTheme) {\n    body.classList.remove('theme-light', 'theme-dark');\n    body.classList.add(savedTheme);\n  } else {\n    body.classList.add('theme-light');\n  }\n}\n\nchangeThemeBtn.addEventListener('click', handleChangeTheme);\n"],"names":["refs","STORAGE_KEYS","limit","currentPage","fetchProducts","skip","url","fetchData","fetchCategories","fetchCategoryProducts","category","BASE_URL","fetchSearchResults","query","fetchProductById","id","theme","updateLocalStorage","key","arr","getFromLocalStorage","saveThemeToLocalStorage","themeValue","loadThemeFromLocalStorage","savedTheme","wishlist","homeCategories","homeProducts","modalProduct","cartBtnModal","wishlistBtnModal","wishlistProducts","productsMarkUp","products","title","brand","price","thumbnail","renderProducts","showLoader","total","appendProducts","checkEndOfCollection","showErrorMessage","hideLoader","categoriesMarkUp","renderCategories","allCategories","clearContent","toggleNotFoundVisibility","createProductById","product","description","tags","images","shippingInformation","returnPolicy","createTags","renderProductById","modalBuyBtn","productsMarkUpSavedItems","qty","createProductByIdSavedItems","renderProductByIdSavedItems","itemInLocal","item","renderProductsInContainer","container","getProductsWithDetails","renderProductsInWishlist","getProductsWithDetailsNoQty","loadMoreBtn","notFoundDiv","loader","data","axios","message","iziToast","updateActiveCategoryBtn","targetBtn","prevActive","showInfoMessage","smoothScroll","heightItem","tag","showLoadMoreBtn","hideLoadMoreBtn","element","updateCartIndicator","box","totalQty","count","idAllProducts","updateCartSum","totalPrice","isVisible","modal","cartSpan","cartProducts","cartItems","cartTotal","wishlistSpan","cart","openModal","productId","handleModalClick","handleKeyDown","closeModal","addToCart","button","index","removeFromCart","currentId","newProducts","addToWishList","removeFromWishList","modalBuyAction","error","form","body","goTopBtn","showProducts","ev","searchProduct","event","openProductModal","liElement","closeBtn","handleLoadMore","handleChangeTheme","trackScroll","Offset","coords","goTop","changeThemeBtn","applySavedTheme"],"mappings":"uvBACY,MAACA,EAAO,CAClB,KAAM,SAAS,KACf,aAAc,SAAS,cAAc,6BAA6B,EAClE,iBAAkB,SAAS,cAAc,iCAAiC,EAC1E,eAAgB,SAAS,cAAc,aAAa,EACpD,YAAa,SAAS,cAAc,YAAY,EAChD,KAAM,SAAS,cAAc,cAAc,EAC3C,aAAc,SAAS,cAAc,gBAAgB,EACrD,MAAO,SAAS,cAAc,QAAQ,EACtC,YAAa,SAAS,cAAc,gBAAgB,EACpD,aAAc,SAAS,cAAc,2BAA2B,EAChE,iBAAkB,SAAS,cAAc,+BAA+B,EACxE,aAAc,SAAS,cAAc,6BAA6B,EAClE,SAAU,SAAS,cAAc,mBAAmB,EACpD,UAAW,SAAS,cAAc,cAAc,EAChD,UAAW,SAAS,cAAc,cAAc,EAChD,aAAc,SAAS,cAAc,uBAAuB,EAC5D,eAAgB,SAAS,cAAc,cAAc,EACrD,SAAU,SAAS,cAAc,SAAS,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,ECnBaC,EAAe,CAC1B,KAAM,gBACN,SAAU,oBACV,MAAO,OACT,EAEaC,EAAQ,GACd,IAAIC,EAAc,ECLlB,eAAeC,EAAcD,EAAc,EAAG,CACnD,MAAME,GAAQF,EAAc,GAAKD,EAC3BI,EAAM,wCAAwCJ,CAAK,SAASG,CAAI,GACtE,OAAOE,EAAUD,CAAG,CACtB,CAEO,eAAeE,IAAkB,CAEtC,OAAOD,EADU,8CACQ,CAC3B,CAEO,eAAeE,EAAsBC,EAAUP,EAAc,EAAG,CACrE,MAAMQ,EAAW,2CACXN,GAAQF,EAAc,GAAKD,EAC3BI,EAAM,GAAGK,CAAQ,GAAGD,CAAQ,UAAUR,CAAK,SAASG,CAAI,GAC9D,OAAOE,EAAUD,CAAG,CACtB,CAEO,eAAeM,EAAmBC,EAAOV,EAAc,EAAG,CAC/D,MAAMQ,EAAW,wCACXN,GAAQF,EAAc,GAAKD,EAC3BI,EAAM,GAAGK,CAAQ,MAAME,CAAK,UAAUX,CAAK,SAASG,CAAI,GAC9D,OAAOE,EAAUD,CAAG,CACtB,CAEO,eAAeQ,EAAiBC,EAAI,CAEzC,MAAMT,EAAM,kCAAcS,CAAE,GAC5B,OAAOR,EAAUD,CAAG,CACtB,CC/BA,KAAM,CAAE,MAAAU,CAAO,EAAGf,EAEX,SAASgB,EAAmBC,EAAKC,EAAK,CAC3C,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAG,CAAC,CAC/C,CAEO,SAASC,EAAoBF,EAAK,CACvC,OAAO,KAAK,MAAM,aAAa,QAAQA,CAAG,CAAC,GAAK,EAClD,CAEO,SAASG,EAAwBC,EAAY,CAClD,aAAa,QAAQN,EAAOM,CAAU,CACxC,CAEO,SAASC,IAA4B,CAC1C,MAAMC,EAAa,aAAa,QAAQR,CAAK,EAC7C,OAAOQ,GAA0B,aACnC,CCEA,KAAM,CAAEC,SAAAA,EAAU,EAAGxB,EACf,CACN,eAAEyB,EACF,aAAEC,GACF,aAAEC,EACF,aAAEC,EACF,iBAAEC,EACF,iBAAEC,CACF,EAAI/B,EAEG,SAASgC,EAAeC,EAAU,CACvC,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAlB,EAAI,MAAAmB,EAAO,MAAAC,EAAO,SAAAzB,EAAU,MAAA0B,EAAO,UAAAC,CAAS,IAAO;AAAA,wCACpBtB,CAAE;AAAA,wCACFsB,CAAS,UAAUH,CAAK;AAAA,iCAC/BA,CAAK;AAAA,kFAC4CC,CAAK;AAAA,8CACzCzB,CAAQ;AAAA,yCACb0B,CAAK;AAAA,OAEzC,EACA,KAAK,EAAE,CACZ,CAEO,eAAeE,IAAiB,CACrCC,IACA,GAAI,CACF,KAAM,CAAE,SAAAN,EAAU,MAAAO,CAAK,EAAK,MAAMpC,EAAcD,CAAW,EAC3DsC,EAAed,GAAcM,CAAQ,EACrCS,EAAqBF,EAAOrC,CAAW,CACxC,MAAe,CACdwC,EACE,sEACN,CACA,QAAY,CACRC,GACD,CACH,CAIO,SAASC,GAAiB1B,EAAK,CACpC,OAAOA,EACJ,IACCT,GAAY;AAAA;AAAA,mDAEiCA,CAAQ;AAAA,OAEtD,EACA,KAAK,EAAE,CACZ,CAEO,eAAeoC,IAAmB,CACvC,GAAI,CAEF,MAAMC,EAAgB,CAAC,MAAO,GADX,MAAMvC,IACkB,EAE3C,GAAIuC,EAAc,SAAW,EAAG,CAC9BC,EAAatB,CAAc,EAC3BuB,EAAyB,EAAI,EAC7B,MACD,CACDvB,EAAe,UAAYmB,GAAiBE,CAAa,EACzDE,EAAyB,EAAK,CAC/B,MAAe,CACdN,EACE,wEACN,CACG,CACH,CAGA,SAASO,GAAkBC,EAAS,CAClC,KAAM,CACJ,MAAAjB,EACA,YAAAkB,EACA,MAAAhB,EACA,KAAAiB,EACA,OAAAC,EACA,oBAAAC,EACA,aAAAC,CACD,EAAGL,EACJ,MAAO,yCACLG,GAAA,YAAAA,EAAS,KAAM,EAChB,UAASpB,CAAK;AAAA;AAAA,0CAEyBA,CAAK;AAAA,0CACLuB,GAAWJ,CAAI,CAAC;AAAA,gDACVD,CAAW;AAAA,mEACQG,CAAmB;AAAA,iEACrBC,CAAY;AAAA,kDAC3BpB,CAAK;AAAA;AAAA,aAGvD,CAEO,eAAesB,EAAkB3C,EAAI,CAC1CwB,IACA,GAAI,CACF,MAAMY,EAAU,MAAMrC,EAAiBC,CAAE,EACzC,GAAI,CAACoC,EAAS,CACZH,EAAapB,CAAY,EACzBqB,EAAyB,EAAI,EAC7B,MACD,CAEDrB,EAAa,UAAYsB,GAAkBC,CAAO,EAClD,MAAMQ,EAAc/B,EAAa,cAAc,yBAAyB,EACxE+B,EAAY,QAAQ,GAAKR,EAAQ,GACjC,QAAQ,IAAIQ,CAAW,EACvB9B,EAAa,QAAQ,GAAKsB,EAAQ,GAClCrB,EAAiB,QAAQ,GAAKqB,EAAQ,GACtCF,EAAyB,EAAK,CAC/B,MAAe,CACdN,EACE,6DACN,CACA,QAAY,CACRC,GACD,CACH,CAEO,SAASgB,GAAyB3B,EAAU,CACjD,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAlB,EAAI,MAAAmB,EAAO,MAAAC,EAAO,SAAAzB,EAAU,MAAA0B,EAAO,UAAAC,EAAW,IAAAwB,CAAG,IAAO;AAAA,wCACzB9C,CAAE;AAAA,wCACFsB,CAAS,UAAUH,CAAK;AAAA,iCAC/BA,CAAK;AAAA,kFAC4CC,CAAK;AAAA,8CACzCzB,CAAQ;AAAA,yCACb0B,CAAK;AAAA,8CACAyB,CAAG;AAAA,OAE5C,EACA,KAAK,EAAE,CACZ,CAEA,SAASC,GAA4BX,EAAS,CAC5C,KAAM,CACJ,MAAAjB,EACA,YAAAkB,EACA,MAAAhB,EACA,KAAAiB,EACA,OAAAC,EACA,oBAAAC,EACA,aAAAC,EACA,IAAAK,EACD,EAAGV,EACJ,MAAO,yCACLG,GAAA,YAAAA,EAAS,KAAM,EAChB,UAASpB,CAAK;AAAA;AAAA,0CAEyBA,CAAK;AAAA,0CACLuB,GAAWJ,CAAI,CAAC;AAAA,gDACVD,CAAW;AAAA,mEACQG,CAAmB;AAAA,iEACrBC,CAAY;AAAA,kDAC3BpB,CAAK;AAAA,uDACAyB,EAAG;AAAA,aAE1D,CAEO,eAAeE,GAA4BhD,EAAIG,EAAK,CACzDqB,IACA,GAAI,CACF,MAAMY,EAAU,MAAMrC,EAAiBC,CAAE,EACzC,GAAI,CAACoC,EAAS,CACZH,EAAapB,CAAY,EACzBqB,EAAyB,EAAI,EAC7B,MACD,CAED,MAAMe,EADoB5C,EAAoBF,CAAG,EACX,KAAK+C,GAAQA,EAAK,KAAOlD,CAAE,EAC3D8C,GAAMG,GAAA,YAAAA,EAAa,MAAO,EAGhCpC,EAAa,UAAYkC,GAA4B,CAAE,GAAGX,EAAS,IAAAU,CAAG,CAAE,EAExEhC,EAAa,QAAQ,GAAKsB,EAAQ,GAClCrB,EAAiB,QAAQ,GAAKqB,EAAQ,GACtCF,EAAyB,EAAK,CAC/B,MAAe,CACdN,EACE,6DACN,CACA,QAAY,CACRC,GACD,CACH,CAGO,eAAesB,GAA0BC,EAAWjD,EAAK,CAC9D,GAAI,CACF,MAAMe,EAAW,MAAMmC,GAAuBlD,CAAG,EACjD,GAAIe,EAAS,SAAW,EAAG,CACzBe,EAAamB,CAAS,EACtBlB,EAAyB,EAAI,EAC7B,MACD,CACDkB,EAAU,UAAYP,GAAyB3B,CAAQ,EACvDgB,EAAyB,EAAK,CAC/B,MAAe,CACdN,EAAiB,oDAAoD,CACtE,CACH,CAEO,eAAe0B,IAA2B,CAC/C,GAAKtC,EACL,CAAAQ,IACA,GAAI,CACF,MAAMN,EAAW,MAAMqC,GAA4B7C,EAAQ,EAE3D,GADA,QAAQ,IAAIQ,CAAQ,EAChBA,EAAS,SAAW,EAAG,CACzBe,EAAajB,CAAgB,EAC7BkB,EAAyB,EAAI,EAC7B,MACD,CAEDlB,EAAiB,UAAYC,EAAeC,CAAQ,EACpDgB,EAAyB,EAAK,CAC/B,MAAe,CACdN,EAAiB,oDAAoD,CACzE,QAAY,CACRC,GACD,EACH,CCnPA,KAAM,CAAE,YAAA2B,EAAaC,YAAAA,EAAa,OAAAC,EAAM,EAAKzE,EAKtC,eAAeO,EAAUD,EAAK,CACnC,KAAM,CAAE,KAAAoE,CAAI,EAAK,MAAMC,GAAM,IAAIrE,CAAG,EACpC,OAAOoE,CACT,CAEO,SAAS/B,EAAiBiC,EAAS,CACxCC,EAAS,MAAM,CACb,QAAAD,EACA,SAAU,cACV,gBAAiB,UACjB,aAAc,UACd,SAAU,KACd,CAAG,CACH,CAEO,SAAS5B,EAAamB,EAAW,CACtCA,EAAU,UAAY,EACxB,CAEO,SAASW,GAAwBX,EAAWY,EAAW,CAC5D,MAAMC,EAAab,EAAU,cAAc,0BAA0B,EACjEa,GACFA,EAAW,UAAU,OAAO,yBAAyB,EAEvDD,EAAU,UAAU,IAAI,yBAAyB,CACnD,CAEO,SAASE,EAAgBL,EAAS,CACvCC,EAAS,KAAK,CACZ,QAAAD,EACA,SAAU,SACV,SAAU,MACV,QAAS,IACb,CAAG,CACH,CAEO,SAASM,IAAe,CAG7B,MAAMC,EAFc,SAAS,cAAc,iBAAiB,EACnC,wBACD,OAExB,OAAO,SAAS,CACd,IAAKA,EAAa,IAClB,SAAU,QACd,CAAG,CACH,CAEO,SAAS1B,GAAWJ,EAAM,CAC/B,OAAOA,EAAK,IAAI+B,GAAO,OAAOA,CAAG,OAAO,EAAE,KAAK,EAAE,CACnD,CAGO,SAASC,IAAkB,CAChCd,EAAY,OAAS,EACvB,CAEO,SAASe,GAAkB,CAChCf,EAAY,OAAS,EACvB,CAEO,SAAS7B,EAAqBF,EAAOrC,EAAa,CAEnDA,EAAc,IAAMqC,GACtByC,EAAgB,mDAAmD,EACnEK,KAEAD,IAEJ,CAEO,SAAS5C,EAAe8C,EAAStD,EAAU,CAChDsD,EAAQ,mBAAmB,YAAavD,EAAeC,CAAQ,CAAC,CAClE,CAEO,SAASuD,EAAoBC,EAAKvE,EAAK,CAC5C,GAAI,CAACuE,GAAO,CAACvE,EAAK,OAGlB,MAAMwE,GADgBtE,EAAoBF,CAAG,GAAK,CAAA,GACnB,OAAO,CAACyE,EAAO,CAAE,IAAA9B,CAAG,IAAO8B,EAAQ9B,EAAK,CAAC,EACxE4B,EAAI,YAAcC,CACpB,CAEO,eAAetB,GAAuBlD,EAAK,CAChD,GAAI,CACFqB,IACA,MAAMqD,EAAgBxE,EAAoBF,CAAG,EAO7C,OANiB,MAAM,QAAQ,IAC7B0E,EAAc,IAAI,MAAO,CAAE,GAAA7E,EAAI,IAAA8C,CAAG,KAEzB,CAAE,GADO,MAAM/C,EAAiBC,CAAE,EACpB,IAAA8C,GACtB,CACP,CAEG,MAAe,CACd,OAAAlB,EAAiB,kDAAkD,EAC5D,EACX,QAAY,CACRC,GACD,CACH,CAEO,eAAe0B,GAA4BpD,EAAK,CACrD,GAAI,CACF,MAAM0E,EAAgBxE,EAAoBF,CAAG,EAO7C,OANiB,MAAM,QAAQ,IAC7B0E,EAAc,IAAI,MAAO,CAAE,GAAA7E,KACT,MAAMD,EAAiBC,CAAE,CAE1C,CACP,CAEG,MAAe,CACd,OAAA4B,EAAiB,kDAAkD,EAC5D,EACR,CACH,CAEO,eAAekD,GAAcJ,EAAKvE,EAAK,CAC5C,GAAI,CAACuE,GAAO,CAACvE,EAAK,OASlB,MAAM4E,IAPW,MAAM1B,GAAuBlD,CAAG,GAEtB,OACzB,CAACsB,EAAO,CAAE,MAAAJ,EAAO,IAAAyB,CAAK,IAAKrB,EAAQJ,EAAQ,IAAMyB,EACjD,CACJ,EAEkC,KAAK,QAAQ,CAAC,EAC9C4B,EAAI,YAAc,IAAIK,CAAU,EAClC,CAEO,SAAS7C,EAAyB8C,EAAW,CAClDA,EACIvB,EAAY,UAAU,IAAI,oBAAoB,EAC9CA,EAAY,UAAU,OAAO,oBAAoB,CACvD,CAEO,SAASjC,GAAa,CAC3BkC,GAAO,MAAM,QAAU,OACzB,CAEO,SAAS7B,GAAa,CAC3B6B,GAAO,MAAM,QAAU,MACzB,CCvJA,KAAM,CACJ,MAAAuB,EACA,aAAAnE,GACA,iBAAAC,EACA,SAAAmE,GACF,aAAEC,GACA,UAAAC,GACA,UAAAC,GACA,aAAAC,EAEF,EAAIrG,EAWE,MAAEsG,EAAM,SAAA7E,CAAU,EAAGxB,EAEpB,SAASsG,IAAY,CAC1BP,EAAM,UAAU,IAAI,gBAAgB,EACpC,MAAMQ,EAAY,OAAO1E,EAAiB,QAAQ,EAAE,EAE9BV,EAAoBK,CAAQ,EAEtB,UAAU,CAAC,CAAE,GAAAV,KAASA,IAAOyF,CAAS,IACpD,GACZ1E,EAAiB,YAAc,uBAE/BA,EAAiB,YAAc,kBAEjCkE,EAAM,iBAAiB,QAASS,EAAgB,EAChD,OAAO,iBAAiB,UAAWC,EAAa,CAClD,CAGO,SAASC,GAAa,CAC3BX,EAAM,UAAU,OAAO,gBAAgB,EACvCA,EAAM,oBAAoB,QAASS,EAAgB,EACnD,OAAO,oBAAoB,UAAWC,EAAa,CACrD,CAGO,SAASE,GAAUC,EAAQ,CAChC,MAAML,EAAY,OAAOK,EAAO,QAAQ,EAAE,EAEpCjB,EAAgBxE,EAAoBkF,CAAI,EAExCQ,EAAQlB,EAAc,UAAU,CAAC,CAAE,GAAA7E,KAASA,IAAOyF,CAAS,EAE9DM,IAAU,GACZlB,EAAc,KAAK,CAAE,GAAIY,EAAW,IAAK,CAAC,CAAE,EAG5CZ,EAAckB,CAAK,EAAE,MAEvB7F,EAAmBqF,EAAMV,CAAa,EACtC,MAAMF,EAAWE,EAAc,OAAO,CAACD,EAAO,CAAE,IAAA9B,CAAG,IAAO8B,EAAQ9B,EAAK,CAAC,EACxEoC,GAAS,YAAcP,EACvBT,EAAgB,wBAAwB,EACxC0B,GACF,CAEO,SAASI,IAAiB,CAC/B,MAAM9E,EAAWb,EAAoBkF,CAAI,EAEnCU,EAAY,OAAOnF,GAAa,QAAQ,EAAE,EAChD,GAAI,CAAC,MAAM,QAAQI,CAAQ,GAAK,CAAC+E,EAAW,OAE5C,MAAMF,EAAQ7E,EAAS,UAAU,CAAC,CAAE,GAAAlB,KAASA,IAAOiG,CAAS,EAC7D,GAAIF,IAAU,IAAM7E,EAAS6E,CAAK,EAAE,IAAM,EACxC7E,EAAS6E,CAAK,EAAE,MAChB7F,EAAmBqF,EAAMrE,CAAQ,EACjCgD,EAAgB,6BAA6B,MACxC,CACL,MAAMgC,EAAchF,EAAS,OAAO,CAAC,CAAE,GAAAlB,KAASA,IAAOiG,CAAS,EAChE/F,EAAmBqF,EAAMW,CAAW,EACpChC,EAAgB,4BAA4B,CAC7C,CACDf,GAA0BgC,GAAcI,CAAI,EAC5CK,IACAnB,EAAoBS,GAAUK,CAAI,EAClCd,EAAoBW,GAAWG,CAAI,EACnCT,GAAcO,GAAWE,CAAI,CAC/B,CAEO,SAASY,IAAgB,CAC9B,MAAMV,EAAY,OAAO1E,EAAiB,QAAQ,EAAE,EAE9C8D,EAAgBxE,EAAoBK,CAAQ,EAGlD,GADcmE,EAAc,UAAU,CAAC,CAAE,GAAA7E,KAASA,IAAOyF,CAAS,IACpD,GAAI,CAChBvB,EAAgB,iCAAiC,EACjD0B,IACA,MACJ,KAAS,CACLf,EAAc,KAAK,CAAE,GAAIY,EAAW,IAAK,CAAC,CAAE,EAC5CvF,EAAmBQ,EAAUmE,CAAa,EAC1C,MAAMF,EAAWE,EAAc,OAAO,CAACD,EAAO,CAAE,IAAA9B,CAAG,IAAO8B,EAAQ9B,EAAK,CAAC,EACxEwC,GAAa,YAAcX,EAC3BT,EAAgB,4BAA4B,EAC5C0B,GACD,CACH,CAEO,SAASQ,IAAqB,CACnC,MAAMlF,EAAWb,EAAoBK,CAAQ,EACvCuF,EAAY,OAAOlF,EAAiB,QAAQ,EAAE,EAGpD,GAFcG,EAAS,UAAU,CAAC,CAAE,GAAAlB,KAASA,IAAOiG,CAAS,IAE/C,GAAI,CAChB,MAAMC,EAAchF,EAAS,OAAO,CAAC,CAAE,GAAAlB,KAASA,IAAOiG,CAAS,EAChE/F,EAAmBQ,EAAUwF,CAAW,EACxChC,EAAgB,gCAAgC,CACjD,CACD0B,IACAnB,EAAoBa,GAAc5E,CAAQ,EAC1C4C,IACF,CAEO,SAAS+C,GAAeP,EAAQ,CACrC,GAAI,CACFD,GAAUC,CAAM,EAChBF,IACA,OAAO,SAAS,KAAO,aACxB,OAAQU,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnD1E,EAAiB,kDAAkD,CACpE,CACH,CCnGA,KAAM,CAAE,KAAA2D,EAAM,EAAGrG,EAEX,CACJ,eAAAyB,GACA,aAAAC,EACA,YAAA6C,GACA,KAAA8C,EACA,aAAApB,GACA,iBAAAnE,GACF,KAAEwF,EACA,SAAAC,EACA,aAAA5F,EACF,EAAI5B,EACJ,IAAIa,EAAQ,GACRV,EAAc,EACdO,EAAW,GAER,eAAe+G,GAAaC,EAAI,CACrC,GAAKA,EAAG,OAAO,UAAU,SAAS,iBAAiB,EACnD,CAAAhH,EAAWgH,EAAG,OAAO,YAAY,KAAI,EAErC5C,GAAwBpD,GAAgBgG,EAAG,MAAM,EACjDvH,EAAc,EACd6C,EAAarB,CAAY,EACzB2D,IACA/C,IAEA,GAAI,CACF,IAAImC,EACAhE,IAAa,MACfgE,EAAO,MAAMtE,EAAcD,CAAW,EAEtCuE,EAAO,MAAMjE,EAAsBC,EAAUP,CAAW,EAG1D,KAAM,CAAE,SAAA8B,EAAU,MAAAO,CAAO,EAAGkC,EAExBzC,EAAS,SAAW,EACtBuC,GAAY,UAAU,IAAI,oBAAoB,GAE9C/B,EAAed,EAAcM,CAAQ,EAErCS,EAAqBF,EAAOrC,CAAW,EAE1C,OAAQkH,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrD1E,EACE,oEACN,CACA,QAAY,CACRC,GACD,EACH,CAEO,eAAe+E,GAAcC,EAAO,CAIxC,GAHDA,EAAM,eAAc,EAEnB/G,EAAQyG,EAAK,SAAS,YAAe,MAAM,OACvC,CAACzG,EAAO,CACV8B,EAAiB,kCAAkC,EACnD,MACF,CAEDxC,EAAc,EACd6C,EAAarB,CAAY,EACzB2D,IACA/C,IAEA,GAAI,CACF,KAAM,CAAE,SAAAN,EAAU,MAAAO,CAAO,EAAG,MAAM5B,EAAmBC,EAAOV,CAAW,EAEvE,GAAI8B,EAAS,SAAW,EAAG,CACzBK,KACAK,EAAiB,sDAAsD,EACvE,MACD,CACDhB,EAAa,UAAYK,EAAeC,CAAQ,EAChDS,EAAqBF,EAAOrC,CAAW,CACxC,OAAQkH,EAAO,CACd,QAAQ,MAAM,kDAAmDA,CAAK,EACtE1E,EACE,yEACN,CACA,QAAY,CACRC,IACA0E,EAAK,MAAK,CACX,CACH,CAGO,eAAeO,GAAiBD,EAAO,CAC5C,MAAME,EAAYF,EAAM,OAAO,QAAQ,iBAAiB,EAExD,GAAI,CAACE,EACH,OAEF,MAAMd,EAAY,OAAOc,EAAU,QAAQ,EAAE,EAEzC,CAACd,GAAa,CAACc,IAIfnG,EACF,MAAM+B,EAAkBsD,CAAS,EACxBd,GACT,MAAMnC,GAA4BiD,EAAWV,EAAI,EACxCvE,IACT,MAAM2B,EAAkBsD,CAAS,EAGnCT,KACF,CAGO,SAASE,GAAiBiB,EAAI,CACnC,MAAMK,EAAWL,EAAG,OAAO,QAAQ,mBAAmB,EAChD7F,EAAe6F,EAAG,OAAO,QAAQ,2BAA2B,EAC5D5F,EAAmB4F,EAAG,OAAO,QAAQ,+BAA+B,EACpE/D,EAAc/B,GAAa,cAAc,yBAAyB,EAExE,GAAI8F,EAAG,SAAWA,EAAG,cAAe,CAClCf,IACA,MACD,CAED,GAAIoB,EAAU,CACZpB,IACA,MACD,SAAU9E,GACT,GAAIA,EAAa,YAAY,KAAI,IAAO,cAAe,CACrD+E,GAAU/E,CAAY,EACtB,MACD,SAAUA,EAAa,YAAY,KAAI,IAAO,mBAAoB,CACjEkF,KACA,MACD,UACQjF,GACT,GAAIA,EAAiB,YAAY,KAAI,IAAO,kBAAmB,CAC7DoF,KACA,MACD,SAAUpF,EAAiB,YAAY,KAAI,IAAO,uBAAwB,CACzEqF,KACA,MACD,UACQxD,EAAa,CACtByD,GAAezD,CAAW,EAC1B,MACD,CACH,CAEO,eAAeqE,GAAeN,EAAI,CACvC,MAAMnD,EAAcmD,EAAG,cACvB,GAAKnD,EAEL,CAAApE,IACAoE,EAAY,SAAW,GACvBe,IACA/C,IAEA,GAAI,CACF,IAAImC,EACA7D,EACF6D,EAAO,MAAM9D,EAAmBC,EAAOV,CAAW,EACzCO,EACLA,IAAa,MACfgE,EAAO,MAAMtE,EAAcD,CAAW,EAEtCuE,EAAO,MAAMjE,EAAsBC,EAAUP,CAAW,EAG1DuE,EAAO,MAAMtE,EAAcD,CAAW,EAExC,KAAM,CAAE,SAAA8B,EAAU,MAAAO,CAAO,EAAGkC,EAExBzC,EAAS,SAAW,EACtBgD,EAAgB,kDAAkD,GAElExC,EAAed,EAAcM,CAAQ,EACrC,WAAW,IAAMiD,GAAY,CAAE,EAC/BxC,EAAqBF,EAAOrC,CAAW,EACvCoE,EAAY,SAAW,GAE1B,MAAe,CACd5B,EAAiB,qDAAqD,CAC1E,QAAY,CACRC,GACD,EACH,CAEO,SAASqF,IAAoB,CAC9BV,EAAK,UAAU,SAAS,aAAa,GACvCA,EAAK,UAAU,QAAQ,cAAe,YAAY,EAClDlG,EAAwB,YAAY,IAEpCkG,EAAK,UAAU,QAAQ,aAAc,aAAa,EAClDlG,EAAwB,aAAa,EAEzC,CAEO,SAAS6G,IAAc,CAC5B,MAAMC,EAAS,OAAO,YAEhBC,EAAS,SAAS,gBAAgB,aACpCD,EAASC,EACXZ,EAAS,UAAU,IAAI,cAAc,EAErCA,EAAS,UAAU,OAAO,cAAc,CAE5C,CAEO,SAASa,IAAQ,CAClB,OAAO,YAAc,IACvB,OAAO,SAAS,EAAG,GAAG,EACtB,WAAWA,GAAO,CAAC,EAEvB,CAEO,SAAS3B,GAAcgB,EAAI,CAC5BA,EAAG,MAAQ,UACbf,GAEJ,CChQA,KAAM,CAAE,KAAAY,EAAM,eAAAe,EAAgB,EAAGtI,EAI1B,SAASuI,IAAkB,CAChC,MAAM/G,EAAaD,KACfC,GACF+F,EAAK,UAAU,OAAO,cAAe,YAAY,EACjDA,EAAK,UAAU,IAAI/F,CAAU,GAE7B+F,EAAK,UAAU,IAAI,aAAa,CAEpC,CAEAe,GAAe,iBAAiB,QAASL,EAAiB"}