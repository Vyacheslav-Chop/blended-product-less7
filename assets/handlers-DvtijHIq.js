import{i as j,a as tt}from"./vendor-CG2pNq4b.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}})();const v={homeProducts:document.querySelector('.products[data-page="home"]'),wishlistProducts:document.querySelector('.products[data-page="wishlist"]'),homeCategories:document.querySelector(".categories"),notFoundDiv:document.querySelector(".not-found"),form:document.querySelector(".search-form"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),loadMoreBtn:document.querySelector(".load-more-btn"),cartBtnModal:document.querySelector(".modal-product__btn--cart"),wishlistBtnModal:document.querySelector(".modal-product__btn--wishlist"),cartProducts:document.querySelector('.products[data-page="cart"]'),cartSpan:document.querySelector("[data-cart-count]"),cartItems:document.querySelector("[data-count]"),cartTotal:document.querySelector("[data-price]"),wishlistSpan:document.querySelector("[data-wishlist-count]")},U={cart:"cart-products",wishlist:"wishlist-products"},g=12;let N=1;async function C(t=1){const o=(t-1)*g,e=`https://dummyjson.com/products?limit=${g}&skip=${o}`;return S(e)}async function ot(){return S("https://dummyjson.com/products/category-list")}async function k(t,o=1){const e="https://dummyjson.com/products/category/",s=(o-1)*g,r=`${e}${t}?limit=${g}&skip=${s}`;return S(r)}async function D(t,o=1){const e="https://dummyjson.com/products/search",s=(o-1)*g,r=`${e}?q=${t}&limit=${g}&skip=${s}`;return S(r)}async function M(t){const e=`https://dummyjson.com/products/${t}`;return S(e)}function b(t,o){localStorage.setItem(t,JSON.stringify(o))}function u(t){return JSON.parse(localStorage.getItem(t))??[]}const{wishlist:et}=U,{homeCategories:R,homeProducts:rt,modalProduct:L,cartBtnModal:H,wishlistBtnModal:Q,wishlistProducts:A}=v;function T(t){return t.map(({id:o,title:e,brand:s,category:r,price:c,thumbnail:n})=>`
  <li class="products__item" data-id="${o}">
    <img class="products__image" src="${n}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
 </li>`).join("")}async function st(){try{const{products:t,total:o}=await C(N);F(rt,t),I(o,N)}catch{i("Something went wrong while loading products. Please try again later.")}}function ct(t){return t.map(o=>`
    <li class="categories__item">
   <button class="categories__btn" type="button">${o}</button>
 </li>`).join("")}async function It(){try{const o=["All",...await ot()];if(o.length===0){f(R),d(!0);return}R.innerHTML=ct(o),d(!1)}catch{i("Something went wrong while loading categories. Please try again later.")}}function nt(t){const{title:o,description:e,price:s,tags:r,images:c,shippingInformation:n,returnPolicy:m}=t;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${K(r)}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: $${s}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function E(t){try{const o=await M(t);if(!o){f(L),d(!0);return}L.innerHTML=nt(o),H.dataset.id=o.id,Q.dataset.id=o.id,d(!1)}catch{i("Failed to load product information. Please try again later.")}}function at(t){return t.map(({id:o,title:e,brand:s,category:r,price:c,thumbnail:n,qty:m})=>`
  <li class="products__item" data-id="${o}">
    <img class="products__image" src="${n}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
    <p class="products__quantity">Quantity: ${m}</p>
 </li>`).join("")}function it(t){const{title:o,description:e,price:s,tags:r,images:c,shippingInformation:n,returnPolicy:m,qty:Z}=t;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${K(r)}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: $${s}</p>
        <p class="modal-product__quantity">Quantity: ${Z}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function dt(t,o){try{const e=await M(t);if(!e){f(L),d(!0);return}const r=u(o).find(n=>n.id===t),c=(r==null?void 0:r.qty)||1;console.log(e),L.innerHTML=it({...e,qty:c}),H.dataset.id=e.id,Q.dataset.id=e.id,d(!1)}catch{i("Failed to load product information. Please try again later.")}}async function lt(t,o){try{const e=await V(o);if(e.length===0){f(t),d(!0);return}t.innerHTML=at(e),d(!1)}catch{i("Failed to render products. Please try again later.")}}async function ut(){if(A)try{const t=await yt(et);if(console.log(t),t.length===0){f(A),d(!0);return}A.innerHTML=T(t),d(!1)}catch{i("Failed to render products. Please try again later.")}}const{loadMoreBtn:J,notFoundDiv:O}=v;async function S(t){const{data:o}=await tt.get(t);return o}function i(t){j.error({message:t,position:"bottomRight",backgroundColor:"#ef4040",messageColor:"#ffffff",maxWidth:"400"})}function f(t){t.innerHTML=""}function pt(t,o){const e=t.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),o.classList.add("categories__btn--active")}function p(t){j.info({message:t,position:"center",maxWidth:"400",timeout:1500})}function mt(){const e=document.querySelector(".products__item").getBoundingClientRect().height;window.scrollBy({top:e*1.5,behavior:"smooth"})}function K(t){return t.map(o=>`<li>${o}</li>`).join("")}function ft(){J.hidden=!1}function q(){J.hidden=!0}function I(t,o){console.log(`Current page: ${o}, Total: ${t}`),o*12>=t?(p("There are no more products to load at the moment."),q(),console.log("No more products to load. Button hidden.")):(ft(),console.log("More products available. Button shown."))}function F(t,o){t.insertAdjacentHTML("beforeend",T(o))}function x(t,o){if(!t||!o)return;const s=(u(o)||[]).reduce((r,{qty:c})=>r+c,0);t.textContent=s}async function V(t){try{const o=u(t);return await Promise.all(o.map(async({id:s,qty:r})=>({...await M(s),qty:r})))}catch{return i("Failed to load products. Please try again later."),[]}}async function yt(t){try{const o=u(t);return await Promise.all(o.map(async({id:s})=>await M(s)))}catch{return i("Failed to load products. Please try again later."),[]}}async function ht(t,o){if(!t||!o)return;const r=((await V(o)).reduce((c,{price:n,qty:m})=>c+n*100*m,0)/100).toFixed(2);t.textContent=`$${r}`}function d(t){t?O.classList.add("not-found--visible"):O.classList.remove("not-found--visible")}const{modal:B,cartBtnModal:z,wishlistBtnModal:w,cartSpan:G,cartProducts:gt,cartItems:_t,cartTotal:Pt,wishlistSpan:Y}=v,{cart:l,wishlist:y}=U;function wt(){B.classList.add("modal--is-open");const t=Number(w.dataset.id);u(y).findIndex(({id:s})=>s===t)!==-1?w.textContent="Remove from Wishlist":w.textContent="Add to Wishlist",B.addEventListener("click",X)}function _(){B.classList.remove("modal--is-open"),B.removeEventListener("click",X)}function $t(){const t=Number(z.dataset.id),o=u(l),e=o.findIndex(({id:r})=>r===t);e===-1?o.push({id:t,qty:1}):o[e].qty++,b(l,o);const s=o.reduce((r,{qty:c})=>r+c,0);G.textContent=s,p("Product added to cart."),_()}function bt(){const t=u(l),o=Number(z.dataset.id);if(!Array.isArray(t)||!o)return;const e=t.findIndex(({id:s})=>s===o);if(e!==-1&&t[e].qty>1)t[e].qty--,b(l,t),p("Product quantity decreased!");else{const s=t.filter(({id:r})=>r!==o);b(l,s),p("Product removed from cart!")}lt(gt,l),_(),x(G,l),x(_t,l),ht(Pt,l)}function St(){const t=Number(w.dataset.id),o=u(y);if(o.findIndex(({id:s})=>s===t)!==-1){p("Product is already in wishlist."),_();return}else{o.push({id:t,qty:1}),b(y,o);const s=o.reduce((r,{qty:c})=>r+c,0);Y.textContent=s,p("Product added to wishList."),_()}}function Ct(){const t=u(y),o=Number(w.dataset.id);if(t.findIndex(({id:s})=>s===o)!==-1){const s=t.filter(({id:r})=>r!==o);b(y,s),p("Product removed from wishlist!")}_(),x(Y,y),ut()}const{homeCategories:Lt,homeProducts:P,notFoundDiv:Bt,form:W,cartProducts:vt,wishlistProducts:Mt}=v;let $="",a=1,h="";async function At(t){if(t.target.classList.contains("categories__btn")){h=t.target.textContent.trim(),pt(Lt,t.target),a=1,f(P),q();try{let o;h==="All"?o=await C(a):o=await k(h,a);const{products:e,total:s}=o;e.length===0?Bt.classList.add("not-found--visible"):(F(P,e),I(s,a))}catch(o){console.error("Oops! Couldn't fetch products:",o),i("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function xt(t){if(t.preventDefault(),a=1,f(P),q(),$=W.elements.searchValue.value.trim(),!$){i("Please fill in the search field!");return}try{const{products:o,total:e}=await D($,a);if(o.length===0){st(),i("Unfortunately, no results were found for this query.");return}P.innerHTML=T(o),I(e,a)}catch(o){console.error("An error occurred while searching for products:",o),i("An error occurred while searching for products. Please try again later.")}finally{W.reset()}}async function Tt(t){const o=t.target.closest(".products__item");if(!o)return;const e=Number(o.dataset.id);!e||!o||(P?await E(e):vt?await dt(e,cart):Mt&&await E(e),wt())}function X(t){const o=t.target.closest(".modal__close-btn"),e=t.target.closest(".modal-product__btn--cart"),s=t.target.closest(".modal-product__btn--wishlist");if(document.querySelector(".modal-product__buy-btn"),o){_();return}else if(e){if(e.textContent.trim()==="Add to Cart"){$t();return}else if(e.textContent.trim()==="Remove from Cart"){bt();return}}else if(s){if(s.textContent.trim()==="Add to Wishlist"){St();return}else if(s.textContent.trim()==="Remove from Wishlist"){Ct();return}}}async function Ft(t){const o=t.currentTarget;if(o){a++,o.disabled=!0,q();try{let e;$?e=await D($,a):h?h==="All"?e=await C(a):e=await k(h,a):e=await C(a);const{products:s,total:r}=e;s.length===0?p("No products found matching your search criteria."):(F(P,s),setTimeout(()=>mt()),I(r,a),o.disabled=!1)}catch{i("Oops! Something went wrong. Please try again later.")}}}export{U as S,v as a,st as b,It as c,xt as d,ht as e,lt as f,Ft as h,Tt as o,ut as r,At as s,x as u};
//# sourceMappingURL=handlers-DvtijHIq.js.map
