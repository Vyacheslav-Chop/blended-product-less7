import{i as j,a as ot}from"./vendor-CG2pNq4b.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}})();const B={homeProducts:document.querySelector('.products[data-page="home"]'),wishlistProducts:document.querySelector('.products[data-page="wishlist"]'),homeCategories:document.querySelector(".categories"),notFoundDiv:document.querySelector(".not-found"),form:document.querySelector(".search-form"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),loadMoreBtn:document.querySelector(".load-more-btn"),cartBtnModal:document.querySelector(".modal-product__btn--cart"),wishlistBtnModal:document.querySelector(".modal-product__btn--wishlist"),cartProducts:document.querySelector('.products[data-page="cart"]'),cartSpan:document.querySelector("[data-cart-count]"),cartItems:document.querySelector("[data-count]"),cartTotal:document.querySelector("[data-price]"),wishlistSpan:document.querySelector("[data-wishlist-count]")},U={cart:"cart-products",wishlist:"wishlist-products"},y=12;let T=1;async function S(o=1){const t=(o-1)*y,e=`https://dummyjson.com/products?limit=${y}&skip=${t}`;return b(e)}async function et(){return b("https://dummyjson.com/products/category-list")}async function W(o,t=1){const e="https://dummyjson.com/products/category/",s=(t-1)*y,r=`${e}${o}?limit=${y}&skip=${s}`;return b(r)}async function k(o,t=1){const e="https://dummyjson.com/products/search",s=(t-1)*y,r=`${e}?q=${o}&limit=${y}&skip=${s}`;return b(r)}async function M(o){const e=`https://dummyjson.com/products/${o}`;return b(e)}function w(o,t){localStorage.setItem(o,JSON.stringify(t))}function p(o){return JSON.parse(localStorage.getItem(o))??[]}const{wishlist:rt}=U,{homeCategories:F,homeProducts:st,modalProduct:C,cartBtnModal:D,wishlistBtnModal:H,wishlistProducts:E}=B;function A(o){return o.map(({id:t,title:e,brand:s,category:r,price:c,thumbnail:n})=>`
  <li class="products__item" data-id="${t}">
    <img class="products__image" src="${n}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
 </li>`).join("")}async function ct(){try{const{products:o,total:t}=await S(T);x(st,o),q(t,T)}catch{i("Something went wrong while loading products. Please try again later.")}}function nt(o){return o.map(t=>`
    <li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join("")}async function It(){try{const t=["All",...await et()];if(t.length===0){f(F),l(!0);return}F.innerHTML=nt(t),l(!1)}catch{i("Something went wrong while loading categories. Please try again later.")}}function at(o){const{title:t,description:e,price:s,tags:r,images:c,shippingInformation:n,returnPolicy:m}=o;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${t}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${J(r)}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: $${s}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function N(o){try{const t=await M(o);if(!t){f(C),l(!0);return}C.innerHTML=at(t),D.dataset.id=t.id,H.dataset.id=t.id,l(!1)}catch{i("Failed to load product information. Please try again later.")}}function it(o){return o.map(({id:t,title:e,brand:s,category:r,price:c,thumbnail:n,qty:m})=>`
  <li class="products__item" data-id="${t}">
    <img class="products__image" src="${n}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
    <p class="products__quantity">Quantity: ${m}</p>
 </li>`).join("")}function dt(o){const{title:t,description:e,price:s,tags:r,images:c,shippingInformation:n,returnPolicy:m,qty:tt}=o;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${t}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${J(r)}</ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: $${s}</p>
        <p class="modal-product__quantity">Quantity: ${tt}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function lt(o,t){try{const e=await M(o);if(!e){f(C),l(!0);return}const r=p(t).find(n=>n.id===o),c=(r==null?void 0:r.qty)||1;console.log(e),C.innerHTML=dt({...e,qty:c}),D.dataset.id=e.id,H.dataset.id=e.id,l(!1)}catch{i("Failed to load product information. Please try again later.")}}async function ut(o,t){try{const e=await K(t);if(e.length===0){f(o),l(!0);return}o.innerHTML=it(e),l(!1)}catch{i("Failed to render products. Please try again later.")}}async function pt(){try{const o=await yt(rt);if(console.log(o),o.length===0){f(E),l(!0);return}E.innerHTML=A(o),l(!1)}catch{i("Failed to render products. Please try again later.")}}const{loadMoreBtn:Q,notFoundDiv:R}=B;async function b(o){const{data:t}=await ot.get(o);return t}function i(o){j.error({message:o,position:"bottomRight",backgroundColor:"#ef4040",messageColor:"#ffffff",maxWidth:"400"})}function f(o){o.innerHTML=""}function mt(o,t){const e=o.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function u(o){j.info({message:o,position:"center",maxWidth:"400",timeout:1500})}function ft(){const e=document.querySelector(".products__item").getBoundingClientRect().height;window.scrollBy({top:e*1.5,behavior:"smooth"})}function J(o){return o.map(t=>`<li>${t}</li>`).join("")}function ht(){Q.hidden=!1}function v(){Q.hidden=!0}function q(o,t){console.log(`Current page: ${t}, Total: ${o}`),t*12>=o?(u("There are no more products to load at the moment."),v(),console.log("No more products to load. Button hidden.")):(ht(),console.log("More products available. Button shown."))}function x(o,t){o.insertAdjacentHTML("beforeend",A(t))}function I(o,t){if(!o||!t)return;const s=(p(t)||[]).reduce((r,{qty:c})=>r+c,0);o.textContent=s}async function K(o){try{const t=p(o);return await Promise.all(t.map(async({id:s,qty:r})=>({...await M(s),qty:r})))}catch{return i("Failed to load products. Please try again later."),[]}}async function yt(o){try{const t=p(o);return await Promise.all(t.map(async({id:s})=>await M(s)))}catch{return i("Failed to load products. Please try again later."),[]}}async function gt(o,t){if(!o||!t)return;const r=((await K(t)).reduce((c,{price:n,qty:m})=>c+n*100*m,0)/100).toFixed(2);o.textContent=`$${r}`}function l(o){o?R.classList.add("not-found--visible"):R.classList.remove("not-found--visible")}const{homeCategories:_t,homeProducts:$,notFoundDiv:Pt,form:O}=B;let _="",a=1,h="";async function At(o){if(o.target.classList.contains("categories__btn")){h=o.target.textContent.trim(),mt(_t,o.target),a=1,f($),v();try{let t;h==="All"?t=await S(a):t=await W(h,a);const{products:e,total:s}=t;e.length===0?Pt.classList.add("not-found--visible"):(x($,e),q(s,a))}catch(t){console.error("Oops! Couldn't fetch products:",t),i("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function xt(o){if(o.preventDefault(),a=1,f($),v(),_=O.elements.searchValue.value.trim(),!_){i("Please fill in the search field!");return}try{const{products:t,total:e}=await k(_,a);if(t.length===0){ct(),i("Unfortunately, no results were found for this query.");return}$.innerHTML=A(t),q(e,a)}catch(t){console.error("An error occurred while searching for products:",t),i("An error occurred while searching for products. Please try again later.")}finally{O.reset()}}function V(o){const t=o.target.closest(".modal__close-btn"),e=o.target.closest(".modal-product__btn--cart"),s=o.target.closest(".modal-product__btn--wishlist");if(t){g();return}else if(e){if(e.textContent.trim()==="Add to Cart"){Lt();return}else if(e.textContent.trim()==="Remove from Cart"){Bt();return}}else if(s){if(s.textContent.trim()==="Add to Wishlist"){Mt();return}else if(s.textContent.trim()==="Remove from Wishlist"){vt();return}}}async function Tt(o){const t=o.currentTarget;if(t){a++,t.disabled=!0,v();try{let e;_?e=await k(_,a):h?h==="All"?e=await S(a):e=await W(h,a):e=await S(a);const{products:s,total:r}=e;s.length===0?u("No products found matching your search criteria."):(x($,s),setTimeout(()=>ft()),q(r,a),t.disabled=!1)}catch{i("Oops! Something went wrong. Please try again later.")}}}const{modal:L,cartBtnModal:z,wishlistBtnModal:G,cartSpan:Y,cartProducts:X,cartItems:wt,cartTotal:$t,wishlistSpan:Z,wishlistProducts:bt,homeProducts:St}=B,{cart:d,wishlist:P}=U;function Ct(){L.classList.add("modal--is-open"),L.addEventListener("click",V)}function g(){L.classList.remove("modal--is-open"),L.removeEventListener("click",V)}function Ft(o){const t=o.target.closest(".products__item");if(!t)return;const e=Number(t.dataset.id);!e||!t||(St?N(e):X?lt(e,d):bt&&N(e),Ct())}function Lt(){const o=Number(z.dataset.id);console.log(o);const t=p(d);console.log(t);const e=t.findIndex(({id:r})=>r===o);e===-1?(t.push({id:o,qty:1}),console.log(t)):t[e].qty++,w(d,t);const s=t.reduce((r,{qty:c})=>r+c,0);Y.textContent=s,u("Product added to cart."),g()}function Bt(){const o=p(d),t=Number(z.dataset.id);if(!Array.isArray(o)||!t)return;const e=o.findIndex(({id:s})=>s===t);if(e!==-1&&o[e].qty>1)o[e].qty--,w(d,o),u("Product quantity decreased!");else{const s=o.filter(({id:r})=>r!==t);w(d,s),u("Product removed from cart!")}ut(X,d),g(),I(Y,d),I(wt,d),gt($t,d)}function Mt(){const o=Number(G.dataset.id);console.log(o);const t=p(P);if(console.log(t),t.findIndex(({id:s})=>s===o)!==-1){u("Product is already in wishlist."),g();return}else{t.push({id:o,qty:1}),w(P,t);const s=t.reduce((r,{qty:c})=>r+c,0);Z.textContent=s,u("Product added to wishList."),g()}}function vt(){const o=p(P),t=Number(G.dataset.id);if(o.findIndex(({id:s})=>s===t)!==-1){const s=o.filter(({id:r})=>r!==t);w(P,s),u("Product removed from wishlist!")}g(),I(Z,P),pt()}export{U as S,B as a,ct as b,It as c,xt as d,gt as e,ut as f,Tt as h,Ft as o,pt as r,At as s,I as u};
//# sourceMappingURL=modal-BZq91Tdd.js.map
