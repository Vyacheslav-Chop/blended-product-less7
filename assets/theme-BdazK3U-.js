import{i as H,a as st}from"./vendor-CG2pNq4b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const L={body:document.body,homeProducts:document.querySelector('.products[data-page="home"]'),wishlistProducts:document.querySelector('.products[data-page="wishlist"]'),homeCategories:document.querySelector(".categories"),notFoundDiv:document.querySelector(".not-found"),form:document.querySelector(".search-form"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),loadMoreBtn:document.querySelector(".load-more-btn"),cartBtnModal:document.querySelector(".modal-product__btn--cart"),wishlistBtnModal:document.querySelector(".modal-product__btn--wishlist"),cartProducts:document.querySelector('.products[data-page="cart"]'),cartSpan:document.querySelector("[data-cart-count]"),cartItems:document.querySelector("[data-count]"),cartTotal:document.querySelector("[data-price]"),wishlistSpan:document.querySelector("[data-wishlist-count]"),changeThemeBtn:document.querySelector("#themeToggle")},q={cart:"cart-products",wishlist:"wishlist-products",theme:"theme"},g=12;let k=1;async function C(t=1){const e=(t-1)*g,o=`https://dummyjson.com/products?limit=${g}&skip=${e}`;return v(o)}async function ct(){return v("https://dummyjson.com/products/category-list")}async function Q(t,e=1){const o="https://dummyjson.com/products/category/",s=(e-1)*g,r=`${o}${t}?limit=${g}&skip=${s}`;return v(r)}async function J(t,e=1){const o="https://dummyjson.com/products/search",s=(e-1)*g,r=`${o}?q=${t}&limit=${g}&skip=${s}`;return v(r)}async function I(t){const o=`https://dummyjson.com/products/${t}`;return v(o)}const{theme:K}=q;function S(t,e){localStorage.setItem(t,JSON.stringify(e))}function u(t){return JSON.parse(localStorage.getItem(t))??[]}function O(t){localStorage.setItem(K,t)}function nt(){const t=localStorage.getItem(K);return t||"theme-light"}const{wishlist:at}=q,{homeCategories:W,homeProducts:it,modalProduct:B,cartBtnModal:V,wishlistBtnModal:z,wishlistProducts:x}=L;function N(t){return t.map(({id:e,title:o,brand:s,category:r,price:c,thumbnail:n})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${n}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
 </li>`).join("")}async function dt(){try{const{products:t,total:e}=await C(k);R(it,t),T(e,k)}catch{i("Something went wrong while loading products. Please try again later.")}}function lt(t){return t.map(e=>`
    <li class="categories__item">
   <button class="categories__btn" type="button">${e}</button>
 </li>`).join("")}async function kt(){try{const e=["All",...await ct()];if(e.length===0){f(W),d(!0);return}W.innerHTML=lt(e),d(!1)}catch{i("Something went wrong while loading categories. Please try again later.")}}function ut(t){const{title:e,description:o,price:s,tags:r,images:c,shippingInformation:n,returnPolicy:m}=t;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${Y(r)}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: $${s}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function j(t){try{const e=await I(t);if(!e){f(B),d(!0);return}B.innerHTML=ut(e),V.dataset.id=e.id,z.dataset.id=e.id,d(!1)}catch{i("Failed to load product information. Please try again later.")}}function pt(t){return t.map(({id:e,title:o,brand:s,category:r,price:c,thumbnail:n,qty:m})=>`
  <li class="products__item" data-id="${e}">
    <img class="products__image" src="${n}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: $${c}</p>
    <p class="products__quantity">Quantity: ${m}</p>
 </li>`).join("")}function mt(t){const{title:e,description:o,price:s,tags:r,images:c,shippingInformation:n,returnPolicy:m,qty:rt}=t;return`<img class="modal-product__img" src="${(c==null?void 0:c[0])||""}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${Y(r)}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${n}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: $${s}</p>
        <p class="modal-product__quantity">Quantity: ${rt}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`}async function ft(t,e){try{const o=await I(t);if(!o){f(B),d(!0);return}const r=u(e).find(n=>n.id===t),c=(r==null?void 0:r.qty)||1;console.log(o),B.innerHTML=mt({...o,qty:c}),V.dataset.id=o.id,z.dataset.id=o.id,d(!1)}catch{i("Failed to load product information. Please try again later.")}}async function ht(t,e){try{const o=await X(e);if(o.length===0){f(t),d(!0);return}t.innerHTML=pt(o),d(!1)}catch{i("Failed to render products. Please try again later.")}}async function yt(){if(x)try{const t=await wt(at);if(console.log(t),t.length===0){f(x),d(!0);return}x.innerHTML=N(t),d(!1)}catch{i("Failed to render products. Please try again later.")}}const{loadMoreBtn:G,notFoundDiv:U}=L;async function v(t){const{data:e}=await st.get(t);return e}function i(t){H.error({message:t,position:"bottomRight",backgroundColor:"#ef4040",messageColor:"#ffffff",maxWidth:"400"})}function f(t){t.innerHTML=""}function gt(t,e){const o=t.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),e.classList.add("categories__btn--active")}function p(t){H.info({message:t,position:"center",maxWidth:"400",timeout:1500})}function _t(){const o=document.querySelector(".products__item").getBoundingClientRect().height;window.scrollBy({top:o*1.5,behavior:"smooth"})}function Y(t){return t.map(e=>`<li>${e}</li>`).join("")}function Pt(){G.hidden=!1}function A(){G.hidden=!0}function T(t,e){console.log(`Current page: ${e}, Total: ${t}`),e*12>=t?(p("There are no more products to load at the moment."),A(),console.log("No more products to load. Button hidden.")):(Pt(),console.log("More products available. Button shown."))}function R(t,e){t.insertAdjacentHTML("beforeend",N(e))}function E(t,e){if(!t||!e)return;const s=(u(e)||[]).reduce((r,{qty:c})=>r+c,0);t.textContent=s}async function X(t){try{const e=u(t);return await Promise.all(e.map(async({id:s,qty:r})=>({...await I(s),qty:r})))}catch{return i("Failed to load products. Please try again later."),[]}}async function wt(t){try{const e=u(t);return await Promise.all(e.map(async({id:s})=>await I(s)))}catch{return i("Failed to load products. Please try again later."),[]}}async function $t(t,e){if(!t||!e)return;const r=((await X(e)).reduce((c,{price:n,qty:m})=>c+n*100*m,0)/100).toFixed(2);t.textContent=`$${r}`}function d(t){t?U.classList.add("not-found--visible"):U.classList.remove("not-found--visible")}const{modal:M,cartBtnModal:Z,wishlistBtnModal:$,cartSpan:tt,cartProducts:bt,cartItems:St,cartTotal:Lt,wishlistSpan:et}=L,{cart:l,wishlist:h}=q;function vt(){M.classList.add("modal--is-open");const t=Number($.dataset.id);u(h).findIndex(({id:s})=>s===t)!==-1?$.textContent="Remove from Wishlist":$.textContent="Add to Wishlist",M.addEventListener("click",ot)}function _(){M.classList.remove("modal--is-open"),M.removeEventListener("click",ot)}function Ct(){const t=Number(Z.dataset.id),e=u(l),o=e.findIndex(({id:r})=>r===t);o===-1?e.push({id:t,qty:1}):e[o].qty++,S(l,e);const s=e.reduce((r,{qty:c})=>r+c,0);tt.textContent=s,p("Product added to cart."),_()}function Bt(){const t=u(l),e=Number(Z.dataset.id);if(!Array.isArray(t)||!e)return;const o=t.findIndex(({id:s})=>s===e);if(o!==-1&&t[o].qty>1)t[o].qty--,S(l,t),p("Product quantity decreased!");else{const s=t.filter(({id:r})=>r!==e);S(l,s),p("Product removed from cart!")}ht(bt,l),_(),E(tt,l),E(St,l),$t(Lt,l)}function Mt(){const t=Number($.dataset.id),e=u(h);if(e.findIndex(({id:s})=>s===t)!==-1){p("Product is already in wishlist."),_();return}else{e.push({id:t,qty:1}),S(h,e);const s=e.reduce((r,{qty:c})=>r+c,0);et.textContent=s,p("Product added to wishList."),_()}}function qt(){const t=u(h),e=Number($.dataset.id);if(t.findIndex(({id:s})=>s===e)!==-1){const s=t.filter(({id:r})=>r!==e);S(h,s),p("Product removed from wishlist!")}_(),E(et,h),yt()}const{cart:It}=q,{homeCategories:At,homeProducts:P,notFoundDiv:Tt,form:D,cartProducts:xt,wishlistProducts:Ft,body:w}=L;let b="",a=1,y="";async function Ot(t){if(t.target.classList.contains("categories__btn")){y=t.target.textContent.trim(),gt(At,t.target),a=1,f(P),A();try{let e;y==="All"?e=await C(a):e=await Q(y,a);const{products:o,total:s}=e;o.length===0?Tt.classList.add("not-found--visible"):(R(P,o),T(s,a))}catch(e){console.error("Oops! Couldn't fetch products:",e),i("Oops! Couldn't fetch products. Check your connection or try again.")}}}async function Wt(t){if(t.preventDefault(),a=1,f(P),A(),b=D.elements.searchValue.value.trim(),!b){i("Please fill in the search field!");return}try{const{products:e,total:o}=await J(b,a);if(e.length===0){dt(),i("Unfortunately, no results were found for this query.");return}P.innerHTML=N(e),T(o,a)}catch(e){console.error("An error occurred while searching for products:",e),i("An error occurred while searching for products. Please try again later.")}finally{D.reset()}}async function jt(t){const e=t.target.closest(".products__item");if(!e)return;const o=Number(e.dataset.id);!o||!e||(P?await j(o):xt?await ft(o,It):Ft&&await j(o),vt())}function ot(t){const e=t.target.closest(".modal__close-btn"),o=t.target.closest(".modal-product__btn--cart"),s=t.target.closest(".modal-product__btn--wishlist");if(document.querySelector(".modal-product__buy-btn"),e){_();return}else if(o){if(o.textContent.trim()==="Add to Cart"){Ct();return}else if(o.textContent.trim()==="Remove from Cart"){Bt();return}}else if(s){if(s.textContent.trim()==="Add to Wishlist"){Mt();return}else if(s.textContent.trim()==="Remove from Wishlist"){qt();return}}}async function Ut(t){const e=t.currentTarget;if(e){a++,e.disabled=!0,A();try{let o;b?o=await J(b,a):y?y==="All"?o=await C(a):o=await Q(y,a):o=await C(a);const{products:s,total:r}=o;s.length===0?p("No products found matching your search criteria."):(R(P,s),setTimeout(()=>_t()),T(r,a),e.disabled=!1)}catch{i("Oops! Something went wrong. Please try again later.")}}}function Et(){w.classList.contains("theme-light")?(w.classList.remove("theme-light"),w.classList.add("theme-dark"),O("theme-dark")):(w.classList.remove("theme-dark"),w.classList.add("theme-light"),O("theme-light"))}const{body:F,changeThemeBtn:Nt}=L;function Dt(){const t=nt();t?(F.classList.remove("theme-light","theme-dark"),F.classList.add(t)):F.classList.add("theme-light")}Nt.addEventListener("click",Et);export{q as S,Dt as a,L as b,dt as c,kt as d,Wt as e,$t as f,ht as g,Ut as h,jt as o,yt as r,Ot as s,E as u};
//# sourceMappingURL=theme-BdazK3U-.js.map
